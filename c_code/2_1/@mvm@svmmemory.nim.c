/* Generated by Nim Compiler v0.1.0-dev.20827 */
#define NIM_INTBITS 32

#include "nimbase.h"
#include <string.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
#define nimfr_(x, y)
#define nimln_(x, y)
typedef struct tyObject_VmAllocator__gSqCwoTp4p9bLsvp8GmAqZA tyObject_VmAllocator__gSqCwoTp4p9bLsvp8GmAqZA;
typedef struct tySequence__XBZFdk9a85uohp2SIhYaefg tySequence__XBZFdk9a85uohp2SIhYaefg;
typedef struct tySequence__XBZFdk9a85uohp2SIhYaefg_Content tySequence__XBZFdk9a85uohp2SIhYaefg_Content;
typedef struct tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw;
typedef struct tyObject_VmCell__51AJUI5ZGwYQ0qXgveCtIA tyObject_VmCell__51AJUI5ZGwYQ0qXgveCtIA;
typedef struct tyObject_VmHeap__ZPseKg9aleNDcMvtzsMaNrw tyObject_VmHeap__ZPseKg9aleNDcMvtzsMaNrw;
typedef struct tySequence__1h2QTNOHMRsW1k8IfJjpCA tySequence__1h2QTNOHMRsW1k8IfJjpCA;
typedef struct tySequence__1h2QTNOHMRsW1k8IfJjpCA_Content tySequence__1h2QTNOHMRsW1k8IfJjpCA_Content;
typedef struct tySequence__qwqHTkRvwhrRyENtudHQ7g tySequence__qwqHTkRvwhrRyENtudHQ7g;
typedef struct tySequence__qwqHTkRvwhrRyENtudHQ7g_Content tySequence__qwqHTkRvwhrRyENtudHQ7g_Content;
typedef struct tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog;
typedef struct tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ;
typedef struct tyObject_HeapSlot__xf5Wl5Ylt1AQdPYaDEQi8w tyObject_HeapSlot__xf5Wl5Ylt1AQdPYaDEQi8w;
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tyTuple__GydKTkMnjfoIKkZIn6nNJA tyTuple__GydKTkMnjfoIKkZIn6nNJA;
typedef struct tyTuple__h9bLYAElfV9baWWhNFMinNYA tyTuple__h9bLYAElfV9baWWhNFMinNYA;
typedef struct tySequence__wpBp0CPmUB9b69btKRWIO1Rg tySequence__wpBp0CPmUB9b69btKRWIO1Rg;
typedef struct tySequence__wpBp0CPmUB9b69btKRWIO1Rg_Content tySequence__wpBp0CPmUB9b69btKRWIO1Rg_Content;
typedef struct tySequence__AxVRn2pP0yQ9c1mmPK9acd4w tySequence__AxVRn2pP0yQ9c1mmPK9acd4w;
typedef struct tySequence__AxVRn2pP0yQ9c1mmPK9acd4w_Content tySequence__AxVRn2pP0yQ9c1mmPK9acd4w_Content;
typedef struct tyObject_VmSlice__Z4siXQvFV9acED13GJNYaxQ tyObject_VmSlice__Z4siXQvFV9acED13GJNYaxQ;
typedef struct tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA;
typedef struct tyObject_BranchListEntry__Sq5TPAi5jBRQ18zrKDgytw tyObject_BranchListEntry__Sq5TPAi5jBRQ18zrKDgytw;
typedef struct tyObject_HSlice__StIimIWc3KxAuy1PrO5LOQ tyObject_HSlice__StIimIWc3KxAuy1PrO5LOQ;
struct tySequence__XBZFdk9a85uohp2SIhYaefg {
  NI len; tySequence__XBZFdk9a85uohp2SIhYaefg_Content* p;
};
struct tyObject_VmAllocator__gSqCwoTp4p9bLsvp8GmAqZA {
tySequence__XBZFdk9a85uohp2SIhYaefg cells;
NI freeHead;
NI freeTail;
tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* byteType;
};
struct tyObject_VmCell__51AJUI5ZGwYQ0qXgveCtIA {
NI count;
NI sizeInBytes;
NU8* p;
tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* typ;
};
typedef NU8 tyUncheckedArray__UL1HEaQiqDiopYXnehs9c2A[1];
struct tySequence__1h2QTNOHMRsW1k8IfJjpCA {
  NI len; tySequence__1h2QTNOHMRsW1k8IfJjpCA_Content* p;
};
struct tySequence__qwqHTkRvwhrRyENtudHQ7g {
  NI len; tySequence__qwqHTkRvwhrRyENtudHQ7g_Content* p;
};
struct tyObject_VmHeap__ZPseKg9aleNDcMvtzsMaNrw {
tySequence__1h2QTNOHMRsW1k8IfJjpCA slots;
tySequence__qwqHTkRvwhrRyENtudHQ7g pending;
};
typedef NU8 tyEnum_DerefFailureCode__AjRiNfXMp5Kang0SiA2e2w;
struct tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ {
NI cell;
NU8* p;
tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* typ;
};
struct tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog {
NIM_BOOL o;
union{
struct {tyEnum_DerefFailureCode__AjRiNfXMp5Kang0SiA2e2w e;
} _o_1;
struct {tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ v;
} _o_2;
};
};
struct tyObject_HeapSlot__xf5Wl5Ylt1AQdPYaDEQi8w {
tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ handle;
NI refCount;
};
typedef NU8 tyEnum_VmTypeRel__kSHTpBrqm3momSuuPVzZMQ;
struct NimStrPayload {
NI cap;
NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
NI len;
NimStrPayload* p;
};
struct tyTuple__GydKTkMnjfoIKkZIn6nNJA {
NI Field0;
tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* Field1;
};
struct tyTuple__h9bLYAElfV9baWWhNFMinNYA {
tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* Field0;
NU32 Field1;
};
typedef NU8 tyEnum_AtomKind__xqRB2huDiSu9aYN59aUTCpgA;
struct tySequence__wpBp0CPmUB9b69btKRWIO1Rg {
  NI len; tySequence__wpBp0CPmUB9b69btKRWIO1Rg_Content* p;
};
struct tySequence__AxVRn2pP0yQ9c1mmPK9acd4w {
  NI len; tySequence__AxVRn2pP0yQ9c1mmPK9acd4w_Content* p;
};
struct tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw {
tyEnum_AtomKind__xqRB2huDiSu9aYN59aUTCpgA kind;
union{
struct {tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* targetType;
} _kind_2;
struct {NI setLength;
} _kind_3;
struct {NI seqElemStride;
tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* seqElemType;
} _kind_4;
struct {NI routineSig;
} _kind_5;
struct {NI numBits;
} _kind_6;
struct {NU32 relFieldStart;
tySequence__wpBp0CPmUB9b69btKRWIO1Rg objFields;
tySequence__AxVRn2pP0yQ9c1mmPK9acd4w branches;
} _kind_7;
struct {NI elementCount;
NI elementStride;
tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* elementType;
} _kind_8;
};
NU sizeInBytes;
NU8 alignment;
};
struct tyObject_VmSlice__Z4siXQvFV9acED13GJNYaxQ {
NI cell;
NU8* start;
NI len;
tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* typ;
};
typedef NU8 tyEnum_VmEventKind__eTgzLRBCQcqciUSHj9a1q1Q;
typedef tyEnum_VmEventKind__eTgzLRBCQcqciUSHj9a1q1Q tyArray__5ZHFgJfuWG9akjqjhTaRKJw[4];
struct tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA {
NI a;
NI b;
};


#ifndef tySequence__XBZFdk9a85uohp2SIhYaefg_Content_PP
#define tySequence__XBZFdk9a85uohp2SIhYaefg_Content_PP
struct tySequence__XBZFdk9a85uohp2SIhYaefg_Content { NI cap; tyObject_VmCell__51AJUI5ZGwYQ0qXgveCtIA data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__XBZFdk9a85uohp2SIhYaefg_Content_PP
#define tySequence__XBZFdk9a85uohp2SIhYaefg_Content_PP
struct tySequence__XBZFdk9a85uohp2SIhYaefg_Content { NI cap; tyObject_VmCell__51AJUI5ZGwYQ0qXgveCtIA data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__1h2QTNOHMRsW1k8IfJjpCA_Content_PP
#define tySequence__1h2QTNOHMRsW1k8IfJjpCA_Content_PP
struct tySequence__1h2QTNOHMRsW1k8IfJjpCA_Content { NI cap; tyObject_HeapSlot__xf5Wl5Ylt1AQdPYaDEQi8w data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__qwqHTkRvwhrRyENtudHQ7g_Content_PP
#define tySequence__qwqHTkRvwhrRyENtudHQ7g_Content_PP
struct tySequence__qwqHTkRvwhrRyENtudHQ7g_Content { NI cap; NI data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__wpBp0CPmUB9b69btKRWIO1Rg_Content_PP
#define tySequence__wpBp0CPmUB9b69btKRWIO1Rg_Content_PP
struct tySequence__wpBp0CPmUB9b69btKRWIO1Rg_Content { NI cap; tyTuple__GydKTkMnjfoIKkZIn6nNJA data[SEQ_DECL_SIZE];};
#endif

      typedef NU8 tyEnum_BranchListEntryKind__VM9cCeSDZ7GoT3pwuX5YNEA;
struct tyObject_HSlice__StIimIWc3KxAuy1PrO5LOQ {
NU32 a;
NU32 b;
};
struct tyObject_BranchListEntry__Sq5TPAi5jBRQ18zrKDgytw {
tyEnum_BranchListEntryKind__VM9cCeSDZ7GoT3pwuX5YNEA kind;
union{
struct {NU32 field;
NU32 numItems;
NU16 defaultBranch;
NU16 numBranches;
} _kind_1;
struct {tyObject_HSlice__StIimIWc3KxAuy1PrO5LOQ fieldRange;
} _kind_2;
};
};


#ifndef tySequence__AxVRn2pP0yQ9c1mmPK9acd4w_Content_PP
#define tySequence__AxVRn2pP0yQ9c1mmPK9acd4w_Content_PP
struct tySequence__AxVRn2pP0yQ9c1mmPK9acd4w_Content { NI cap; tyObject_BranchListEntry__Sq5TPAi5jBRQ18zrKDgytw data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__qwqHTkRvwhrRyENtudHQ7g_Content_PP
#define tySequence__qwqHTkRvwhrRyENtudHQ7g_Content_PP
struct tySequence__qwqHTkRvwhrRyENtudHQ7g_Content { NI cap; NI data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__1h2QTNOHMRsW1k8IfJjpCA_Content_PP
#define tySequence__1h2QTNOHMRsW1k8IfJjpCA_Content_PP
struct tySequence__1h2QTNOHMRsW1k8IfJjpCA_Content { NI cap; tyObject_HeapSlot__xf5Wl5Ylt1AQdPYaDEQi8w data[SEQ_DECL_SIZE];};
#endif

      N_LIB_PRIVATE N_NIMCALL(NI, mapPointerToCell__vmZvmmemory_121)(tyObject_VmAllocator__gSqCwoTp4p9bLsvp8GmAqZA a, NU8* p);
N_LIB_PRIVATE N_NIMCALL(void, dealloc__vmZvmmemory_180)(tyObject_VmAllocator__gSqCwoTp4p9bLsvp8GmAqZA* a, NI c);
N_LIB_PRIVATE N_NOCONV(void, dealloc)(void* p);
N_LIB_PRIVATE N_NIMCALL(void, reset__vmZvmdef_5576)(tyObject_VmCell__51AJUI5ZGwYQ0qXgveCtIA* obj);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NOCONV(void*, alloc0Impl__system_1726)(NI size);
N_LIB_PRIVATE N_NIMCALL(NI, addCell__vmZvmmemory_31)(tyObject_VmAllocator__gSqCwoTp4p9bLsvp8GmAqZA* a, void* p, tyObject_VmCell__51AJUI5ZGwYQ0qXgveCtIA c);
N_LIB_PRIVATE N_NIMCALL(void, setLen__vmZvmdef_5548)(tySequence__XBZFdk9a85uohp2SIhYaefg* s, NI newlen);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___vmZvmdef_5590)(tyObject_VmCell__51AJUI5ZGwYQ0qXgveCtIA* dest, tyObject_VmCell__51AJUI5ZGwYQ0qXgveCtIA src);
static N_INLINE(void, nimZeroMem)(void* p, NI size);
static N_INLINE(void, nimSetMem__systemZmemory_7)(void* a, int v, NI size);
N_LIB_PRIVATE N_NIMCALL(void, initFailure__vmZvmmemory_511)(tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog* self, tyEnum_DerefFailureCode__AjRiNfXMp5Kang0SiA2e2w e);
N_LIB_PRIVATE N_NIMCALL(void, err__vmZvmmemory_516)(tyEnum_DerefFailureCode__AjRiNfXMp5Kang0SiA2e2w e, tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog* Result);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___vmZvmmemory_541)(tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog* dest, tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog src);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___vmZvmdef_4404)(tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ* dest, tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ src);
N_LIB_PRIVATE N_NIMCALL(tyEnum_VmTypeRel__kSHTpBrqm3momSuuPVzZMQ, getTypeRel__vmZvmtypes_179)(tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* a, tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* b);
N_LIB_PRIVATE N_NIMCALL(void, initSuccess__vmZvmmemory_585)(tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog* self, tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ v);
N_LIB_PRIVATE N_NIMCALL(void, ok__vmZvmmemory_590)(tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ v, tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog* Result);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___vmZvmdef_4401)(tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___vmZvmdef_1143)(tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw** dest, tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* src, NIM_BOOL cyclic);
static N_INLINE(void, getFieldAndOwner__vmZvmtypes_94)(tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* t, NU32 p, tyTuple__h9bLYAElfV9baWWhNFMinNYA* Result);
static N_INLINE(void, nimMarkCyclic)(void* p);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___vmZvmdef_1227)(tyTuple__GydKTkMnjfoIKkZIn6nNJA* dest, tyTuple__GydKTkMnjfoIKkZIn6nNJA src);
static N_INLINE(void, subLocation__vmZvmmemory_264)(tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ h, NI offset, tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* typ, tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ* Result);
static N_INLINE(NU8*, applyOffset__vmZvmmemory_290)(NU8* p, NU offset);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___vmZvmdef_1224)(tyTuple__GydKTkMnjfoIKkZIn6nNJA* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___vmZvmdef_1140)(tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw** dest);
N_LIB_PRIVATE N_NIMCALL(void, add__experimentalZdiff_630)(tySequence__qwqHTkRvwhrRyENtudHQ7g* x, NI value);
static N_INLINE(NU8*, applyOffset__vmZvmmemory_219)(NU8* p, NU offset);
N_LIB_PRIVATE N_NIMCALL(void, add__vmZvmdef_2981)(tySequence__1h2QTNOHMRsW1k8IfJjpCA* x, tyObject_HeapSlot__xf5Wl5Ylt1AQdPYaDEQi8w value);
N_LIB_PRIVATE N_NIMCALL(void, allocSingleLocation__vmZvmmemory_81)(tyObject_VmAllocator__gSqCwoTp4p9bLsvp8GmAqZA* a, tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* typ, tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ* Result);
N_LIB_PRIVATE N_NIMCALL(NI, mapInteriorPointerToCell__vmZvmmemory_130)(tyObject_VmAllocator__gSqCwoTp4p9bLsvp8GmAqZA a, void* p);
static N_INLINE(NIM_BOOL, contains__pureZtimes_2650)(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA s, NI value);
static N_INLINE(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA, dotdot___pureZunicode_935)(NI a, NI b);
static const struct {
  NI cap; NIM_CHAR data[6+1];
} TM__JD3YSB9cKn3T4etVXkVEWPA_2 = { 6 | NIM_STRLIT_FLAG, "dfcNil" };
static const NimStringV2 TM__JD3YSB9cKn3T4etVXkVEWPA_3 = {6, (NimStrPayload*)&TM__JD3YSB9cKn3T4etVXkVEWPA_2};
static const struct {
  NI cap; NIM_CHAR data[10+1];
} TM__JD3YSB9cKn3T4etVXkVEWPA_4 = { 10 | NIM_STRLIT_FLAG, "dfcInvalid" };
static const NimStringV2 TM__JD3YSB9cKn3T4etVXkVEWPA_5 = {10, (NimStrPayload*)&TM__JD3YSB9cKn3T4etVXkVEWPA_4};
static const struct {
  NI cap; NIM_CHAR data[8+1];
} TM__JD3YSB9cKn3T4etVXkVEWPA_6 = { 8 | NIM_STRLIT_FLAG, "dfcFreed" };
static const NimStringV2 TM__JD3YSB9cKn3T4etVXkVEWPA_7 = {8, (NimStrPayload*)&TM__JD3YSB9cKn3T4etVXkVEWPA_6};
static const struct {
  NI cap; NIM_CHAR data[15+1];
} TM__JD3YSB9cKn3T4etVXkVEWPA_8 = { 15 | NIM_STRLIT_FLAG, "dfcTypeMismatch" };
static const NimStringV2 TM__JD3YSB9cKn3T4etVXkVEWPA_9 = {15, (NimStrPayload*)&TM__JD3YSB9cKn3T4etVXkVEWPA_8};
N_LIB_PRIVATE NIM_CONST tyArray__5ZHFgJfuWG9akjqjhTaRKJw FailureCodeToEvent__vmZvmmemory_13 = {((tyEnum_VmEventKind__eTgzLRBCQcqciUSHj9a1q1Q) 6),
((tyEnum_VmEventKind__eTgzLRBCQcqciUSHj9a1q1Q) 7),
((tyEnum_VmEventKind__eTgzLRBCQcqciUSHj9a1q1Q) 7),
((tyEnum_VmEventKind__eTgzLRBCQcqciUSHj9a1q1Q) 8)}
;
extern NIM_BOOL nimInErrorMode__system_4174;
N_LIB_PRIVATE N_NIMCALL(NI, mapPointerToCell__vmZvmmemory_121)(tyObject_VmAllocator__gSqCwoTp4p9bLsvp8GmAqZA a, NU8* p) {
	NI result;
{	result = (NI)0;
	{
		NI id;
		NI i;
		id = (NI)0;
		i = ((NI) 0);
		{
			while (1) {
				{
					if (!!((i < a.freeTail))) goto LA6_;
					goto LA3;
				}
				LA6_: ;
				id = i;
				{
					if (!(((void*) (a.cells.p->data[id].p)) == ((void*) (p)))) goto LA10_;
					result = id;
					goto BeforeRet_;
				}
				LA10_: ;
				i += ((NI) 1);
			} LA3: ;
		}
	}
	result = ((NI) -1);
	}BeforeRet_: ;
	return result;
}
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (NIM_BOOL*)0;
	result = (&nimInErrorMode__system_4174);
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, dealloc__vmZvmmemory_180)(tyObject_VmAllocator__gSqCwoTp4p9bLsvp8GmAqZA* a, NI c) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	dealloc(((void*) ((*a).cells.p->data[c].p)));
	reset__vmZvmdef_5576((&(*a).cells.p->data[c]));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*a).cells.p->data[c].count = (*a).freeHead;
	(*a).freeHead = c;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, dealloc__vmZvmmemory_196)(tyObject_VmAllocator__gSqCwoTp4p9bLsvp8GmAqZA* a, NU8* p) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NI id;
		if (!!((((void*) (p)) == NIM_NIL))) goto LA3_;
		id = mapPointerToCell__vmZvmmemory_121((*a), p);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		dealloc__vmZvmmemory_180(a, id);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA3_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(NI, addCell__vmZvmmemory_31)(tyObject_VmAllocator__gSqCwoTp4p9bLsvp8GmAqZA* a, void* p, tyObject_VmCell__51AJUI5ZGwYQ0qXgveCtIA c) {
	NI result;
	tyObject_VmCell__51AJUI5ZGwYQ0qXgveCtIA* colontmp_;
	result = (NI)0;
	{
		if (!((*a).freeHead == (*a).freeTail)) goto LA3_;
		{
			NI T7_;
			NI T10_;
			T7_ = (*a).cells.len;
			if (!(T7_ <= (*a).freeTail)) goto LA8_;
			T10_ = (*a).cells.len;
			setLen__vmZvmdef_5548((&(*a).cells), ((NI) (((((NI) 16) >= (NI)((NI)(T10_ * ((NI) 3)) / ((NI) 2))) ? ((NI) 16) : (NI)((NI)(T10_ * ((NI) 3)) / ((NI) 2))))));
		}
		LA8_: ;
		(*a).freeTail += ((NI) 1);
		(*a).cells.p->data[(*a).freeHead].count = (*a).freeTail;
	}
	LA3_: ;
	result = (*a).freeHead;
	(*a).freeHead = (*a).cells.p->data[result].count;
	c.p = ((NU8*) (p));
	colontmp_ = (&(*a).cells.p->data[result]);
	eqsink___vmZvmdef_5590(colontmp_, c);
	return result;
}
static N_INLINE(void, nimSetMem__systemZmemory_7)(void* a, int v, NI size) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a, v, ((size_t) (size)));
	(void)(T1_);
}
static N_INLINE(void, nimZeroMem)(void* p, NI size) {
	nimSetMem__systemZmemory_7(p, ((int) 0), size);
}
N_LIB_PRIVATE N_NIMCALL(NU8*, allocTypedLocations__vmZvmmemory_69)(tyObject_VmAllocator__gSqCwoTp4p9bLsvp8GmAqZA* a, tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* typ, NI count, NI lenInBytes) {
	NU8* result;
	void* p;
	tyObject_VmCell__51AJUI5ZGwYQ0qXgveCtIA T1_;
	NI T2_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NU8*)0;
	p = alloc0Impl__system_1726(((NI) ((NU)((NU32)((NU)((NU32)((NU)((NU32)((NU)((NU32)(((NU) (lenInBytes))) + (NU32)(((NU) 8)))) - (NU32)(((NU) 1)))) / (NU32)(((NU) 8)))) * (NU32)(((NU) 8))))));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)(&T1_), sizeof(tyObject_VmCell__51AJUI5ZGwYQ0qXgveCtIA));
	T1_.typ = typ;
	T1_.count = ((NI) (count));
	T1_.sizeInBytes = ((NI) (lenInBytes));
	T2_ = (NI)0;
	T2_ = addCell__vmZvmmemory_31(a, p, T1_);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(void)(T2_);
	result = ((NU8*) (p));
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, err__vmZvmmemory_516)(tyEnum_DerefFailureCode__AjRiNfXMp5Kang0SiA2e2w e, tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog* Result) {
	nimZeroMem((void*)Result, sizeof(tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog));
	(*Result).o = NIM_FALSE;
	(*Result)._o_1.e = e;
	switch ((*Result).o) {
	case NIM_FALSE:
	break;
	case NIM_TRUE:
	break;
	} 
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___vmZvmmemory_541)(tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog* dest, tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog src) {
	(*dest).o = src.o;
	switch ((*dest).o) {
	case NIM_FALSE:
	{
		(*dest)._o_1.e = src._o_1.e;
	}
	break;
	case NIM_TRUE:
	{
		(*dest)._o_2.v = src._o_2.v;
	}
	break;
	default:
	{
	}
	break;
	}
}
N_LIB_PRIVATE N_NIMCALL(void, initFailure__vmZvmmemory_511)(tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog* self, tyEnum_DerefFailureCode__AjRiNfXMp5Kang0SiA2e2w e) {
	tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog* colontmp_;
	tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog colontmp__2;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	colontmp_ = self;
	nimZeroMem((void*)(&colontmp__2), sizeof(tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog));
	err__vmZvmmemory_516(e, (&colontmp__2));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	eqsink___vmZvmmemory_541(colontmp_, colontmp__2);
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, ok__vmZvmmemory_590)(tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ v, tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog* Result) {
	nimZeroMem((void*)Result, sizeof(tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog));
	(*Result).o = NIM_TRUE;
	(*Result)._o_2.v = v;
	switch ((*Result).o) {
	case NIM_FALSE:
	break;
	case NIM_TRUE:
	break;
	} 
}
N_LIB_PRIVATE N_NIMCALL(void, initSuccess__vmZvmmemory_585)(tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog* self, tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ v) {
	tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog* colontmp_;
	tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog colontmp__2;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	colontmp_ = self;
	nimZeroMem((void*)(&colontmp__2), sizeof(tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog));
	ok__vmZvmmemory_590(v, (&colontmp__2));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	eqsink___vmZvmmemory_541(colontmp_, colontmp__2);
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, tryDeref__vmZvmmemory_498)(tyObject_VmHeap__ZPseKg9aleNDcMvtzsMaNrw heap, NI slot, tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* typ, tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog* Result) {
NIM_BOOL oldNimErrFin15_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)Result, sizeof(tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog));
	{
		tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ h;
		tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ* colontmp_;
		{
			if (!(slot == ((NI) 0))) goto LA4_;
			initFailure__vmZvmmemory_511(Result, ((tyEnum_DerefFailureCode__AjRiNfXMp5Kang0SiA2e2w) 0));
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			goto LA1;
		}
		LA4_: ;
		{
			NI T8_;
			T8_ = heap.slots.len;
			if (!(T8_ <= slot)) goto LA9_;
			initFailure__vmZvmmemory_511(Result, ((tyEnum_DerefFailureCode__AjRiNfXMp5Kang0SiA2e2w) 1));
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			goto LA1;
		}
		LA9_: ;
		{
			if (!(heap.slots.p->data[slot].refCount == ((NI) 0))) goto LA13_;
			initFailure__vmZvmmemory_511(Result, ((tyEnum_DerefFailureCode__AjRiNfXMp5Kang0SiA2e2w) 2));
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			goto LA1;
		}
		LA13_: ;
		nimZeroMem((void*)(&h), sizeof(tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ));
		colontmp_ = (&heap.slots.p->data[slot].handle);
		eqcopy___vmZvmdef_4404((&h), (*colontmp_));
		{
			NIM_BOOL colontmp__2;
			colontmp__2 = (NIM_BOOL)0;
			{
				tyEnum_VmTypeRel__kSHTpBrqm3momSuuPVzZMQ T22_;
				colontmp__2 = (typ == ((tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw*) NIM_NIL));
				{
					if (!colontmp__2) goto LA20_;
					goto LA17;
				}
				LA20_: ;
				T22_ = (tyEnum_VmTypeRel__kSHTpBrqm3momSuuPVzZMQ)0;
				T22_ = getTypeRel__vmZvmtypes_179(h.typ, typ);
				if (NIM_UNLIKELY(*nimErr_)) goto LA15_;
				colontmp__2 = (T22_ == ((tyEnum_VmTypeRel__kSHTpBrqm3momSuuPVzZMQ) 1) || T22_ == ((tyEnum_VmTypeRel__kSHTpBrqm3momSuuPVzZMQ) 2));
			} LA17: ;
			{
				tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ colontmp__3;
				if (!colontmp__2) goto LA25_;
				nimZeroMem((void*)(&colontmp__3), sizeof(tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ));
				colontmp__3 = h;
				nimZeroMem((void*)(&h), sizeof(tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ));
				initSuccess__vmZvmmemory_585(Result, colontmp__3);
				if (NIM_UNLIKELY(*nimErr_)) goto LA15_;
				goto LA16;
			}
			LA25_: ;
			initFailure__vmZvmmemory_511(Result, ((tyEnum_DerefFailureCode__AjRiNfXMp5Kang0SiA2e2w) 3));
			if (NIM_UNLIKELY(*nimErr_)) goto LA15_;
		} LA16: ;
		{
			LA15_:;
		}
		{
			oldNimErrFin15_ = *nimErr_; *nimErr_ = NIM_FALSE;
			eqdestroy___vmZvmdef_4401((&h));
			*nimErr_ = oldNimErrFin15_;
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	} LA1: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___vmZvmmemory_10)(tyEnum_DerefFailureCode__AjRiNfXMp5Kang0SiA2e2w e) {
	NimStringV2 result;
	result.len = 0; result.p = NIM_NIL;
	switch (e) {
	case ((tyEnum_DerefFailureCode__AjRiNfXMp5Kang0SiA2e2w) 0):
	{
		result = TM__JD3YSB9cKn3T4etVXkVEWPA_3;
	}
	break;
	case ((tyEnum_DerefFailureCode__AjRiNfXMp5Kang0SiA2e2w) 1):
	{
		result = TM__JD3YSB9cKn3T4etVXkVEWPA_5;
	}
	break;
	case ((tyEnum_DerefFailureCode__AjRiNfXMp5Kang0SiA2e2w) 2):
	{
		result = TM__JD3YSB9cKn3T4etVXkVEWPA_7;
	}
	break;
	case ((tyEnum_DerefFailureCode__AjRiNfXMp5Kang0SiA2e2w) 3):
	{
		result = TM__JD3YSB9cKn3T4etVXkVEWPA_9;
	}
	break;
	}
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___vmZvmmemory_535)(tyObject_Result__7y1YSaQtCk5qwBsZ3NTBog* dest) {
}
static N_INLINE(void, nimMarkCyclic)(void* p) {
}
static N_INLINE(void, getFieldAndOwner__vmZvmtypes_94)(tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* t, NU32 p, tyTuple__h9bLYAElfV9baWWhNFMinNYA* Result) {
	tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* colontmp_;
	tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* t_2;
	NU32 colontmp__3;
	NU32 adjusted;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	colontmp_ = (tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw*)0;
	t_2 = (tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw*)0;
	eqcopy___vmZvmdef_1143(&t_2, t, NIM_FALSE);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		while (1) {
			tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw** colontmp__2;
			{
				if (!!((((NI) (p)) < (NI)(((NI) ((*t_2)._kind_7.relFieldStart)) - ((NI) 1))))) goto LA5_;
				goto LA2;
			}
			LA5_: ;
			colontmp__2 = &(*t_2)._kind_7.objFields.p->data[((NI) 0)].Field1;
			eqcopy___vmZvmdef_1143(&t_2, (*colontmp__2), NIM_FALSE);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		} LA2: ;
	}
	colontmp__3 = (NU32)0;
	{
		NI rX60gensym16_;
		{
			if (!((*t_2)._kind_7.relFieldStart == ((NU32) 0))) goto LA10_;
			colontmp__3 = p;
			goto LA7;
		}
		LA10_: ;
		rX60gensym16_ = (NI)0;
		rX60gensym16_ = ((NI) ((*t_2)._kind_7.relFieldStart));
		colontmp__3 = ((NU32) ((NI)((NI)(((NI) (p)) - (NI)(rX60gensym16_ - ((NI) 1))) + ((NI) 1))));
	} LA7: ;
	adjusted = colontmp__3;
	colontmp_ = t_2;
	nimMarkCyclic(t_2);
	(*Result).Field0 = colontmp_;
	(*Result).Field1 = adjusted;
	}BeforeRet_: ;
}
static N_INLINE(NU8*, applyOffset__vmZvmmemory_290)(NU8* p, NU offset) {
	NU8* result;
	result = (NU8*)0;
	result = ((NU8*) ((&p[offset])));
	return result;
}
static N_INLINE(void, subLocation__vmZvmmemory_264)(tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ h, NI offset, tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* typ, tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ* Result) {
	tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&T1_), sizeof(tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ));
	T1_.cell = h.cell;
	T1_.p = applyOffset__vmZvmmemory_290(h.p, ((NU) (offset)));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	T1_.typ = typ;
	(*Result) = T1_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, getFieldHandle__vmZvmmemory_301)(tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ loc, NU32 pos, tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ* Result) {
	tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* typ;
	tyTuple__GydKTkMnjfoIKkZIn6nNJA f;
	tyTuple__h9bLYAElfV9baWWhNFMinNYA colontmp_;
	tyTuple__h9bLYAElfV9baWWhNFMinNYA colontmp__3;
	NU32 adjusted;
	tyTuple__GydKTkMnjfoIKkZIn6nNJA* colontmp__4;
	tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ T7_;
NIM_BOOL oldNimErrFin1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)Result, sizeof(tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ));
	typ = (tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw*)0;
	nimZeroMem((void*)(&f), sizeof(tyTuple__GydKTkMnjfoIKkZIn6nNJA));
	nimZeroMem((void*)(&colontmp_), sizeof(tyTuple__h9bLYAElfV9baWWhNFMinNYA));
	{
		{
			tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* colontmp__2;
			if (!((*loc.typ)._kind_7.relFieldStart == ((NU32) 0))) goto LA5_;
			colontmp__2 = (tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw*)0;
			colontmp__2 = 0;
			eqcopy___vmZvmdef_1143(&colontmp__2, loc.typ, NIM_TRUE);
			if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
			colontmp_.Field0 = colontmp__2;
			colontmp_.Field1 = pos;
			goto LA2;
		}
		LA5_: ;
		getFieldAndOwner__vmZvmtypes_94(loc.typ, pos, (&colontmp_));
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	} LA2: ;
	nimZeroMem((void*)(&colontmp__3), sizeof(tyTuple__h9bLYAElfV9baWWhNFMinNYA));
	colontmp__3 = colontmp_;
	typ = colontmp__3.Field0;
	adjusted = (NU32)0;
	adjusted = colontmp__3.Field1;
	colontmp__4 = (&(*typ)._kind_7.objFields.p->data[adjusted]);
	eqcopy___vmZvmdef_1227((&f), (*colontmp__4));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	nimZeroMem((void*)(&T7_), sizeof(tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ));
	subLocation__vmZvmmemory_264(loc, ((NI) (f.Field0)), f.Field1, (&T7_));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	(*Result) = T7_;
	{
		LA1_:;
	}
	{
		oldNimErrFin1_ = *nimErr_; *nimErr_ = NIM_FALSE;
		eqdestroy___vmZvmdef_1224((&f));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		eqdestroy___vmZvmdef_1140(&typ);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		*nimErr_ = oldNimErrFin1_;
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, heapIncRef__vmZvmmemory_364)(tyObject_VmHeap__ZPseKg9aleNDcMvtzsMaNrw* heap, NI slot) {
	(*heap).slots.p->data[slot].refCount += ((NI) 1);
}
N_LIB_PRIVATE N_NIMCALL(void, heapDecRef__vmZvmmemory_394)(tyObject_VmHeap__ZPseKg9aleNDcMvtzsMaNrw* heap, tyObject_VmAllocator__gSqCwoTp4p9bLsvp8GmAqZA* a, NI slot) {
	{
		{
			if (!(((NI) 1) < (*heap).slots.p->data[slot].refCount)) goto LA4_;
			(*heap).slots.p->data[slot].refCount -= ((NI) 1);
			goto LA1;
		}
		LA4_: ;
		(*heap).slots.p->data[slot].refCount = ((NI) 0);
		add__experimentalZdiff_630((&(*heap).pending), slot);
	} LA1: ;
}
static N_INLINE(NU8*, applyOffset__vmZvmmemory_219)(NU8* p, NU offset) {
	NU8* result;
	result = (NU8*)0;
	result = ((NU8*) ((&p[offset])));
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, makeLocHandle__vmZvmmemory_212)(tyObject_VmAllocator__gSqCwoTp4p9bLsvp8GmAqZA a, NU8* cp, NI offset, tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* typ, tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ* Result) {
	NI id;
	NU8* T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	id = mapPointerToCell__vmZvmmemory_121(a, cp);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)Result, sizeof(tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ));
	(*Result).cell = id;
	T1_ = (NU8*)0;
	T1_ = applyOffset__vmZvmmemory_219(cp, ((NU) (offset)));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*Result).p = T1_;
	(*Result).typ = typ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, allocSingleLocation__vmZvmmemory_81)(tyObject_VmAllocator__gSqCwoTp4p9bLsvp8GmAqZA* a, tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* typ, tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ* Result) {
	NU numBytes;
	void* p;
	NI cell;
	tyObject_VmCell__51AJUI5ZGwYQ0qXgveCtIA T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	numBytes = (*typ).sizeInBytes;
	p = alloc0Impl__system_1726(((NI) ((NU)((NU32)((NU)((NU32)((NU)((NU32)((NU)((NU32)(numBytes) + (NU32)(((NU) 8)))) - (NU32)(((NU) 1)))) / (NU32)(((NU) 8)))) * (NU32)(((NU) 8))))));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)(&T1_), sizeof(tyObject_VmCell__51AJUI5ZGwYQ0qXgveCtIA));
	T1_.typ = typ;
	T1_.count = ((NI) 1);
	T1_.sizeInBytes = ((NI) (numBytes));
	cell = addCell__vmZvmmemory_31(a, p, T1_);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)Result, sizeof(tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ));
	(*Result).cell = cell;
	(*Result).typ = typ;
	(*Result).p = ((NU8*) (p));
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(NI, heapNew__vmZvmmemory_346)(tyObject_VmHeap__ZPseKg9aleNDcMvtzsMaNrw* heap, tyObject_VmAllocator__gSqCwoTp4p9bLsvp8GmAqZA* a, tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* typ) {
	NI result;
	NI T1_;
	tyObject_HeapSlot__xf5Wl5Ylt1AQdPYaDEQi8w T2_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI)0;
	T1_ = (*heap).slots.len;
	result = T1_;
	nimZeroMem((void*)(&T2_), sizeof(tyObject_HeapSlot__xf5Wl5Ylt1AQdPYaDEQi8w));
	allocSingleLocation__vmZvmmemory_81(a, typ, (&T2_.handle));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	T2_.refCount = ((NI) 1);
	add__vmZvmdef_2981((&(*heap).slots), T2_);
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, allocConstantLocation__vmZvmmemory_117)(tyObject_VmAllocator__gSqCwoTp4p9bLsvp8GmAqZA* a, tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* typ, tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ* Result) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	allocSingleLocation__vmZvmmemory_81(a, typ, Result);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, unsafeDeref__vmZvmmemory_457)(tyObject_VmHeap__ZPseKg9aleNDcMvtzsMaNrw heap, NI slot, tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ* Result) {
	tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ* colontmp_;
	nimZeroMem((void*)Result, sizeof(tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ));
	colontmp_ = (&heap.slots.p->data[slot].handle);
	eqcopy___vmZvmdef_4404(Result, (*colontmp_));
}
N_LIB_PRIVATE N_NIMCALL(void, loadFullSlice__vmZvmmemory_225)(tyObject_VmAllocator__gSqCwoTp4p9bLsvp8GmAqZA a, NU8* cp, tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* typ, tyObject_VmSlice__Z4siXQvFV9acED13GJNYaxQ* Result) {
	NI id;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	id = mapPointerToCell__vmZvmmemory_121(a, cp);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)Result, sizeof(tyObject_VmSlice__Z4siXQvFV9acED13GJNYaxQ));
	(*Result).cell = id;
	(*Result).start = ((NU8*) (cp));
	(*Result).len = a.cells.p->data[id].count;
	(*Result).typ = typ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___vmZvmmemory_231)(tyObject_VmSlice__Z4siXQvFV9acED13GJNYaxQ* dest) {
}
static N_INLINE(NIM_BOOL, contains__pureZtimes_2650)(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA s, NI value) {
	NIM_BOOL result;
	NIM_BOOL colontmp_;
	result = (NIM_BOOL)0;
	colontmp_ = (NIM_BOOL)0;
	{
		colontmp_ = (s.a <= value);
		{
			if (!!(colontmp_)) goto LA4_;
			goto LA1;
		}
		LA4_: ;
		colontmp_ = (value <= s.b);
	} LA1: ;
	result = colontmp_;
	return result;
}
static N_INLINE(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA, dotdot___pureZunicode_935)(NI a, NI b) {
	tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA result;
	nimZeroMem((void*)(&result), sizeof(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA));
	nimZeroMem((void*)(&result), sizeof(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA));
	result.a = a;
	result.b = b;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, mapInteriorPointerToCell__vmZvmmemory_130)(tyObject_VmAllocator__gSqCwoTp4p9bLsvp8GmAqZA a, void* p) {
	NI result;
	NI rp;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI)0;
	rp = ((NI) (ptrdiff_t) (p));
	{
		NI id;
		NI i;
		id = (NI)0;
		i = ((NI) 0);
		{
			while (1) {
				tyObject_VmCell__51AJUI5ZGwYQ0qXgveCtIA cell;
				NI start;
				{
					if (!!((i < a.freeTail))) goto LA6_;
					goto LA3;
				}
				LA6_: ;
				id = i;
				nimZeroMem((void*)(&cell), sizeof(tyObject_VmCell__51AJUI5ZGwYQ0qXgveCtIA));
				cell = a.cells.p->data[id];
				start = ((NI) (ptrdiff_t) (cell.p));
				{
					tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA T10_;
					NIM_BOOL T11_;
					T10_ = dotdot___pureZunicode_935(start, (NI)((NI)(start + cell.sizeInBytes) - ((NI) 1)));
					T11_ = (NIM_BOOL)0;
					T11_ = contains__pureZtimes_2650(T10_, rp);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					if (!T11_) goto LA12_;
					result = id;
					goto BeforeRet_;
				}
				LA12_: ;
				i += ((NI) 1);
			} LA3: ;
		}
	}
	result = ((NI) -1);
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, makeLocHandle__vmZvmmemory_206)(tyObject_VmAllocator__gSqCwoTp4p9bLsvp8GmAqZA a, void* p, tyObject_VmType__HY2RsrrQA39a8NBQH6MxQxw* typ, tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ* Result) {
	NI colontmp_;
	NI id;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	colontmp_ = (NI)0;
	{
		{
			if (!(p == NIM_NIL)) goto LA4_;
			colontmp_ = ((NI) -1);
			goto LA1;
		}
		LA4_: ;
		colontmp_ = mapInteriorPointerToCell__vmZvmmemory_130(a, p);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	} LA1: ;
	id = colontmp_;
	nimZeroMem((void*)Result, sizeof(tyObject_LocHandle__YBCSR3j8RwvpUw6Is9aQ9apQ));
	(*Result).cell = id;
	(*Result).p = ((NU8*) (p));
	(*Result).typ = typ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___vmZvmmemory_234)(tyObject_VmSlice__Z4siXQvFV9acED13GJNYaxQ* dest, tyObject_VmSlice__Z4siXQvFV9acED13GJNYaxQ src) {
	(*dest).cell = src.cell;
	(*dest).start = src.start;
	(*dest).len = src.len;
	(*dest).typ = src.typ;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, isValid__vmZvmmemory_429)(tyObject_VmHeap__ZPseKg9aleNDcMvtzsMaNrw heap, NI slot) {
	NIM_BOOL result;
	NIM_BOOL colontmp_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	colontmp_ = (NIM_BOOL)0;
	{
		NI T2_;
		tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA T3_;
		T2_ = heap.slots.len;
		T3_ = dotdot___pureZunicode_935(((NI) 1), (NI)(T2_ - ((NI) 1)));
		colontmp_ = contains__pureZtimes_2650(T3_, slot);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		{
			if (!!(colontmp_)) goto LA6_;
			goto LA1;
		}
		LA6_: ;
		colontmp_ = (((NI) 0) < heap.slots.p->data[slot].refCount);
	} LA1: ;
	result = colontmp_;
	}BeforeRet_: ;
	return result;
}
