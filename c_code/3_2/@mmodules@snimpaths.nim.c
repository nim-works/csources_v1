/* Generated by Nim Compiler v0.1.0-dev.20827 */
#define NIM_INTBITS 64

#include "nimbase.h"
#include <string.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
#define nimfr_(x, y)
#define nimln_(x, y)
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tyTuple__7q7q3E6Oj24ZNVJb9aonhAg tyTuple__7q7q3E6Oj24ZNVJb9aonhAg;
struct NimStrPayload {
NI cap;
NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
NI len;
NimStrPayload* p;
};
typedef NimStringV2 tyArray__1zLil16glT9bkLCBaE9bgQgA[2];
struct tyTuple__7q7q3E6Oj24ZNVJb9aonhAg {
NimStringV2 Field0;
NimStringV2 Field1;
NimStringV2 Field2;
};
typedef NimStringV2 tyArray__0hdGhHecCa49b3yafytOEGw[4];
typedef NimStringV2 tyArray__Wex9cTiLLztRmCSkLU7RNiA[1];
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nsuFormatOpenArray)(NimStringV2 formatstr, NimStringV2* a, NI aLen_0);
static N_INLINE(NIM_BOOL, contains__pureZos_839)(NIM_CHAR* a, NI aLen_0, NIM_CHAR item);
static N_INLINE(NI, find__pureZos_844)(NIM_CHAR* a, NI aLen_0, NIM_CHAR item);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(void, failedAssertImpl__systemZassertions_65)(NimStringV2 msg);
static N_INLINE(void, appendString)(NimStringV2* dest, NimStringV2 src);
static N_INLINE(void, copyMem__system_1708)(void* dest, void* source, NI size);
static N_INLINE(void, nimCopyMem)(void* dest, void* source, NI size);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___modulesZnimpaths_67)(tyTuple__7q7q3E6Oj24ZNVJb9aonhAg* x);
N_LIB_PRIVATE N_NIMCALL(void, prepareAdd)(NimStringV2* s, NI addlen);
N_LIB_PRIVATE N_NIMCALL(void, addQuoted__pureZos_490)(NimStringV2* s, NimStringV2 x);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, rawNewString)(NI space);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___system_3228)(NimStringV2* dest);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, interp__modulesZnimpaths_63)(NimStringV2 path, NimStringV2 nimr);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, nosfileExists)(NimStringV2 filename);
N_LIB_PRIVATE N_NIMCALL(NimStringV2, nospquoteShell)(NimStringV2 s);
N_LIB_PRIVATE N_NIMCALL(void, echoBinSafe)(NimStringV2* args, NI argsLen_0);
N_LIB_PRIVATE N_NIMCALL(NI, nosexecShellCmd)(NimStringV2 command);
static const struct {
  NI cap; NIM_CHAR data[4+1];
} TM__O9aA9byHYLJvQWppK9cdLra6Q_2 = { 4 | NIM_STRLIT_FLAG, "nimr" };
static const NimStringV2 TM__O9aA9byHYLJvQWppK9cdLra6Q_3 = {4, (NimStrPayload*)&TM__O9aA9byHYLJvQWppK9cdLra6Q_2};
static const struct {
  NI cap; NIM_CHAR data[40+1];
} TM__O9aA9byHYLJvQWppK9cdLra6Q_4 = { 40 | NIM_STRLIT_FLAG, "nimpaths.nim(37, 12) `\'$\' notin result` " };
static const NimStringV2 TM__O9aA9byHYLJvQWppK9cdLra6Q_5 = {40, (NimStrPayload*)&TM__O9aA9byHYLJvQWppK9cdLra6Q_4};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__O9aA9byHYLJvQWppK9cdLra6Q_6 = { 1 | NIM_STRLIT_FLAG, "(" };
static const NimStringV2 TM__O9aA9byHYLJvQWppK9cdLra6Q_7 = {1, (NimStrPayload*)&TM__O9aA9byHYLJvQWppK9cdLra6Q_6};
static const struct {
  NI cap; NIM_CHAR data[2+1];
} TM__O9aA9byHYLJvQWppK9cdLra6Q_8 = { 2 | NIM_STRLIT_FLAG, ", " };
static const NimStringV2 TM__O9aA9byHYLJvQWppK9cdLra6Q_9 = {2, (NimStrPayload*)&TM__O9aA9byHYLJvQWppK9cdLra6Q_8};
static const NimStringV2 TM__O9aA9byHYLJvQWppK9cdLra6Q_10 = {2, (NimStrPayload*)&TM__O9aA9byHYLJvQWppK9cdLra6Q_8};
static const NimStringV2 TM__O9aA9byHYLJvQWppK9cdLra6Q_11 = {2, (NimStrPayload*)&TM__O9aA9byHYLJvQWppK9cdLra6Q_8};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__O9aA9byHYLJvQWppK9cdLra6Q_12 = { 1 | NIM_STRLIT_FLAG, "," };
static const NimStringV2 TM__O9aA9byHYLJvQWppK9cdLra6Q_13 = {1, (NimStrPayload*)&TM__O9aA9byHYLJvQWppK9cdLra6Q_12};
static const struct {
  NI cap; NIM_CHAR data[1+1];
} TM__O9aA9byHYLJvQWppK9cdLra6Q_14 = { 1 | NIM_STRLIT_FLAG, ")" };
static const NimStringV2 TM__O9aA9byHYLJvQWppK9cdLra6Q_15 = {1, (NimStrPayload*)&TM__O9aA9byHYLJvQWppK9cdLra6Q_14};
static const struct {
  NI cap; NIM_CHAR data[30+1];
} TM__O9aA9byHYLJvQWppK9cdLra6Q_16 = { 30 | NIM_STRLIT_FLAG, "$nimr/tools/dochack/dochack.js" };
static const NimStringV2 TM__O9aA9byHYLJvQWppK9cdLra6Q_17 = {30, (NimStrPayload*)&TM__O9aA9byHYLJvQWppK9cdLra6Q_16};
static const struct {
  NI cap; NIM_CHAR data[24+1];
} TM__O9aA9byHYLJvQWppK9cdLra6Q_18 = { 24 | NIM_STRLIT_FLAG, "$nim js -d:release $file" };
static const NimStringV2 TM__O9aA9byHYLJvQWppK9cdLra6Q_19 = {24, (NimStrPayload*)&TM__O9aA9byHYLJvQWppK9cdLra6Q_18};
static const struct {
  NI cap; NIM_CHAR data[3+1];
} TM__O9aA9byHYLJvQWppK9cdLra6Q_20 = { 3 | NIM_STRLIT_FLAG, "nim" };
static const NimStringV2 TM__O9aA9byHYLJvQWppK9cdLra6Q_21 = {3, (NimStrPayload*)&TM__O9aA9byHYLJvQWppK9cdLra6Q_20};
static const struct {
  NI cap; NIM_CHAR data[4+1];
} TM__O9aA9byHYLJvQWppK9cdLra6Q_22 = { 4 | NIM_STRLIT_FLAG, "file" };
static const NimStringV2 TM__O9aA9byHYLJvQWppK9cdLra6Q_23 = {4, (NimStrPayload*)&TM__O9aA9byHYLJvQWppK9cdLra6Q_22};
static const struct {
  NI cap; NIM_CHAR data[31+1];
} TM__O9aA9byHYLJvQWppK9cdLra6Q_24 = { 31 | NIM_STRLIT_FLAG, "$nimr/tools/dochack/dochack.nim" };
static const NimStringV2 TM__O9aA9byHYLJvQWppK9cdLra6Q_25 = {31, (NimStrPayload*)&TM__O9aA9byHYLJvQWppK9cdLra6Q_24};
static const struct {
  NI cap; NIM_CHAR data[20+1];
} TM__O9aA9byHYLJvQWppK9cdLra6Q_26 = { 20 | NIM_STRLIT_FLAG, "getDocHacksJs: cmd: " };
static const NimStringV2 TM__O9aA9byHYLJvQWppK9cdLra6Q_27 = {20, (NimStrPayload*)&TM__O9aA9byHYLJvQWppK9cdLra6Q_26};
static const struct {
  NI cap; NIM_CHAR data[46+1];
} TM__O9aA9byHYLJvQWppK9cdLra6Q_28 = { 46 | NIM_STRLIT_FLAG, "nimpaths.nim(46, 14) `execShellCmd(cmd) == 0` " };
static const NimStringV2 TM__O9aA9byHYLJvQWppK9cdLra6Q_29 = {46, (NimStrPayload*)&TM__O9aA9byHYLJvQWppK9cdLra6Q_28};
static const struct {
  NI cap; NIM_CHAR data[45+1];
} TM__O9aA9byHYLJvQWppK9cdLra6Q_30 = { 45 | NIM_STRLIT_FLAG, "nimpaths.nim(47, 12) `docHackJs2.fileExists` " };
static const NimStringV2 TM__O9aA9byHYLJvQWppK9cdLra6Q_31 = {45, (NimStrPayload*)&TM__O9aA9byHYLJvQWppK9cdLra6Q_30};
extern NIM_BOOL nimInErrorMode__system_4174;
static N_INLINE(NI, find__pureZos_844)(NIM_CHAR* a, NI aLen_0, NIM_CHAR item) {
	NI result;
{	result = (NI)0;
	result = ((NI) 0);
	{
		NIM_CHAR i;
		NI i_2;
		i = (NIM_CHAR)0;
		i_2 = ((NI) 0);
		{
			while (1) {
				{
					if (!!((i_2 < aLen_0))) goto LA6_;
					goto LA3;
				}
				LA6_: ;
				i = a[i_2];
				{
					if (!((NU8)(i) == (NU8)(item))) goto LA10_;
					goto BeforeRet_;
				}
				LA10_: ;
				result += ((NI) 1);
				i_2 += ((NI) 1);
			} LA3: ;
		}
	}
	result = ((NI) -1);
	}BeforeRet_: ;
	return result;
}
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (NIM_BOOL*)0;
	result = (&nimInErrorMode__system_4174);
	return result;
}
static N_INLINE(NIM_BOOL, contains__pureZos_839)(NIM_CHAR* a, NI aLen_0, NIM_CHAR item) {
	NIM_BOOL result;
	NI T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NIM_BOOL)0;
	T1_ = (NI)0;
	T1_ = find__pureZos_844(a, aLen_0, item);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	result = (((NI) 0) <= T1_);
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
static N_INLINE(void, nimCopyMem)(void* dest, void* source, NI size) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memcpy(dest, source, ((size_t) (size)));
	(void)(T1_);
}
static N_INLINE(void, copyMem__system_1708)(void* dest, void* source, NI size) {
	nimCopyMem(dest, source, size);
}
static N_INLINE(void, appendString)(NimStringV2* dest, NimStringV2 src) {
	{
		if (!(((NI) 0) < src.len)) goto LA3_;
		copyMem__system_1708(((void*) ((&(*(*dest).p).data[(*dest).len]))), ((void*) ((&(*src.p).data[((NI) 0)]))), ((NI) ((NI)(src.len + ((NI) 1)))));
		(*dest).len += src.len;
	}
	LA3_: ;
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, dollar___modulesZnimpaths_67)(tyTuple__7q7q3E6Oj24ZNVJb9aonhAg* x) {
	NimStringV2 result;
	NI count;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result.len = 0; result.p = NIM_NIL;
	result = TM__O9aA9byHYLJvQWppK9cdLra6Q_7;
	count = ((NI) 0);
	{
		if (!(((NI) 0) < count)) goto LA3_;
		prepareAdd((&result), 2);
appendString((&result), TM__O9aA9byHYLJvQWppK9cdLra6Q_9);
	}
	LA3_: ;
	count += ((NI) 1);
	addQuoted__pureZos_490((&result), (*x).Field0);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		if (!(((NI) 0) < count)) goto LA7_;
		prepareAdd((&result), 2);
appendString((&result), TM__O9aA9byHYLJvQWppK9cdLra6Q_10);
	}
	LA7_: ;
	count += ((NI) 1);
	addQuoted__pureZos_490((&result), (*x).Field1);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		if (!(((NI) 0) < count)) goto LA11_;
		prepareAdd((&result), 2);
appendString((&result), TM__O9aA9byHYLJvQWppK9cdLra6Q_11);
	}
	LA11_: ;
	count += ((NI) 1);
	addQuoted__pureZos_490((&result), (*x).Field2);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		if (!(count == ((NI) 1))) goto LA15_;
		prepareAdd((&result), 1);
appendString((&result), TM__O9aA9byHYLJvQWppK9cdLra6Q_13);
	}
	LA15_: ;
	prepareAdd((&result), 1);
appendString((&result), TM__O9aA9byHYLJvQWppK9cdLra6Q_15);
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, interp__modulesZnimpaths_63)(NimStringV2 path, NimStringV2 nimr) {
	NimStringV2 result;
	tyArray__1zLil16glT9bkLCBaE9bgQgA T1_;
NIM_BOOL oldNimErrFin7_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result.len = 0; result.p = NIM_NIL;
	T1_[0] = TM__O9aA9byHYLJvQWppK9cdLra6Q_3;
	T1_[1] = nimr;
	result = nsuFormatOpenArray(path, T1_, 2);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		NIM_BOOL T4_;
		NimStringV2 colontmp_;
		NimStringV2 colontmp__2;
		NimStringV2 colontmp__3;
		NimStringV2 T8_;
		NimStringV2 colontmp__4;
		tyTuple__7q7q3E6Oj24ZNVJb9aonhAg T9_;
		T4_ = (NIM_BOOL)0;
		T4_ = contains__pureZos_839(result.p->data, result.len, 36);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (!!(!(T4_))) goto LA5_;
		colontmp_.len = 0; colontmp_.p = NIM_NIL;
		colontmp__2.len = 0; colontmp__2.p = NIM_NIL;
		T8_.len = 0; T8_.p = NIM_NIL;
		T9_.Field0 = path;
		T9_.Field1 = nimr;
		T9_.Field2 = result;
		colontmp__4 = dollar___modulesZnimpaths_67((&T9_));
		if (NIM_UNLIKELY(*nimErr_)) goto LA7_;
		colontmp_ = colontmp__4;
		T8_ = rawNewString(colontmp_.len + 40);
appendString((&T8_), TM__O9aA9byHYLJvQWppK9cdLra6Q_5);
appendString((&T8_), colontmp_);
		colontmp__3 = T8_;
		colontmp__2 = colontmp__3;
		failedAssertImpl__systemZassertions_65(colontmp__2);
		if (NIM_UNLIKELY(*nimErr_)) goto LA7_;
		{
			LA7_:;
		}
		{
			oldNimErrFin7_ = *nimErr_; *nimErr_ = NIM_FALSE;
			eqdestroy___system_3228((&colontmp__2));
			eqdestroy___system_3228((&colontmp_));
			*nimErr_ = oldNimErrFin7_;
		}
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA5_: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NimStringV2, getDocHacksJs__modulesZnimpaths_146)(NimStringV2 nimr, NimStringV2 nim, NIM_BOOL forceRebuild) {
	NimStringV2 result;
	NimStringV2 docHackJs2;
	NIM_BOOL colontmp_;
NIM_BOOL oldNimErrFin21_;
NIM_BOOL oldNimErrFin12_;
NIM_BOOL oldNimErrFin1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result.len = 0; result.p = NIM_NIL;
	docHackJs2.len = 0; docHackJs2.p = NIM_NIL;
	docHackJs2 = interp__modulesZnimpaths_63(TM__O9aA9byHYLJvQWppK9cdLra6Q_17, nimr);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	colontmp_ = (NIM_BOOL)0;
	{
		NIM_BOOL T7_;
		colontmp_ = forceRebuild;
		{
			if (!colontmp_) goto LA5_;
			goto LA2;
		}
		LA5_: ;
		T7_ = (NIM_BOOL)0;
		T7_ = nosfileExists(docHackJs2);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		colontmp_ = !(T7_);
	} LA2: ;
	{
		NimStringV2 cmd;
		NimStringV2 colontmp__2;
		NimStringV2 colontmp__3;
		NimStringV2 colontmp__4;
		NimStringV2 colontmp__5;
		tyArray__0hdGhHecCa49b3yafytOEGw T13_;
		NimStringV2 colontmp__6;
		NimStringV2 colontmp__7;
		NimStringV2 colontmp__8;
		tyArray__Wex9cTiLLztRmCSkLU7RNiA T14_;
		NimStringV2 colontmp__9;
		NimStringV2 T15_;
		if (!colontmp_) goto LA10_;
		cmd.len = 0; cmd.p = NIM_NIL;
		colontmp__2.len = 0; colontmp__2.p = NIM_NIL;
		colontmp__3.len = 0; colontmp__3.p = NIM_NIL;
		colontmp__4.len = 0; colontmp__4.p = NIM_NIL;
		colontmp__5.len = 0; colontmp__5.p = NIM_NIL;
		T13_[0] = TM__O9aA9byHYLJvQWppK9cdLra6Q_21;
		colontmp__6 = nospquoteShell(nim);
		if (NIM_UNLIKELY(*nimErr_)) goto LA12_;
		colontmp__2 = colontmp__6;
		T13_[1] = colontmp__2;
		T13_[2] = TM__O9aA9byHYLJvQWppK9cdLra6Q_23;
		colontmp__8 = interp__modulesZnimpaths_63(TM__O9aA9byHYLJvQWppK9cdLra6Q_25, nimr);
		if (NIM_UNLIKELY(*nimErr_)) goto LA12_;
		colontmp__3 = colontmp__8;
		colontmp__7 = nospquoteShell(colontmp__3);
		if (NIM_UNLIKELY(*nimErr_)) goto LA12_;
		colontmp__4 = colontmp__7;
		T13_[3] = colontmp__4;
		cmd = nsuFormatOpenArray(TM__O9aA9byHYLJvQWppK9cdLra6Q_19, T13_, 4);
		if (NIM_UNLIKELY(*nimErr_)) goto LA12_;
		T15_.len = 0; T15_.p = NIM_NIL;
		T15_ = rawNewString(cmd.len + 20);
appendString((&T15_), TM__O9aA9byHYLJvQWppK9cdLra6Q_27);
appendString((&T15_), cmd);
		colontmp__9 = T15_;
		colontmp__5 = colontmp__9;
		T14_[0] = colontmp__5;
		echoBinSafe(T14_, 1);
		{
			NI T18_;
			NimStringV2 colontmp__10;
			NimStringV2 colontmp__11;
			NimStringV2 T22_;
			T18_ = (NI)0;
			T18_ = nosexecShellCmd(cmd);
			if (NIM_UNLIKELY(*nimErr_)) goto LA12_;
			if (!!((T18_ == ((NI) 0)))) goto LA19_;
			colontmp__10.len = 0; colontmp__10.p = NIM_NIL;
			T22_.len = 0; T22_.p = NIM_NIL;
			T22_ = rawNewString(cmd.len + 46);
appendString((&T22_), TM__O9aA9byHYLJvQWppK9cdLra6Q_29);
appendString((&T22_), cmd);
			colontmp__11 = T22_;
			colontmp__10 = colontmp__11;
			failedAssertImpl__systemZassertions_65(colontmp__10);
			if (NIM_UNLIKELY(*nimErr_)) goto LA21_;
			{
				LA21_:;
			}
			{
				oldNimErrFin21_ = *nimErr_; *nimErr_ = NIM_FALSE;
				eqdestroy___system_3228((&colontmp__10));
				*nimErr_ = oldNimErrFin21_;
			}
			if (NIM_UNLIKELY(*nimErr_)) goto LA12_;
		}
		LA19_: ;
		{
			LA12_:;
		}
		{
			oldNimErrFin12_ = *nimErr_; *nimErr_ = NIM_FALSE;
			eqdestroy___system_3228((&colontmp__5));
			eqdestroy___system_3228((&colontmp__4));
			eqdestroy___system_3228((&colontmp__3));
			eqdestroy___system_3228((&colontmp__2));
			eqdestroy___system_3228((&cmd));
			*nimErr_ = oldNimErrFin12_;
		}
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	LA10_: ;
	{
		NIM_BOOL T29_;
		T29_ = (NIM_BOOL)0;
		T29_ = nosfileExists(docHackJs2);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		if (!!(T29_)) goto LA30_;
		failedAssertImpl__systemZassertions_65(TM__O9aA9byHYLJvQWppK9cdLra6Q_31);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	LA30_: ;
	result = docHackJs2;
	docHackJs2.len = 0; docHackJs2.p = NIM_NIL;
	{
		LA1_:;
	}
	{
		oldNimErrFin1_ = *nimErr_; *nimErr_ = NIM_FALSE;
		eqdestroy___system_3228((&docHackJs2));
		*nimErr_ = oldNimErrFin1_;
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
