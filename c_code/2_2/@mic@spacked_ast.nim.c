/* Generated by Nim Compiler v0.1.0-dev.20827 */
#define NIM_INTBITS 64

#include "nimbase.h"
#include <string.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
#define nimfr_(x, y)
#define nimln_(x, y)
typedef struct tySequence__29bS0n2QNyO1R7e0qMMOvLA tySequence__29bS0n2QNyO1R7e0qMMOvLA;
typedef struct tySequence__29bS0n2QNyO1R7e0qMMOvLA_Content tySequence__29bS0n2QNyO1R7e0qMMOvLA_Content;
typedef struct tyObject_PackedNode__7lDGAZiNp4zbO65GEpoKow tyObject_PackedNode__7lDGAZiNp4zbO65GEpoKow;
typedef struct tyObject_PackedItemId__FzcXUzSZ9cNfGYsfibgjWlQ tyObject_PackedItemId__FzcXUzSZ9cNfGYsfibgjWlQ;
typedef struct tyObject_PackedLineInfo__Q9bbXLBurHo2r5TyF6UBshg tyObject_PackedLineInfo__Q9bbXLBurHo2r5TyF6UBshg;
typedef struct tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw;
typedef struct tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ;
typedef struct tyObject_NimSeqV2__Oq19cjcO1UYpAD7qV2RhlDQ tyObject_NimSeqV2__Oq19cjcO1UYpAD7qV2RhlDQ;
typedef struct tyObject_NimSeqPayload__Z0as4CdzHLTrVov9cf38R1g tyObject_NimSeqPayload__Z0as4CdzHLTrVov9cf38R1g;
struct tySequence__29bS0n2QNyO1R7e0qMMOvLA {
  NI len; tySequence__29bS0n2QNyO1R7e0qMMOvLA_Content* p;
};
typedef NU8 tyEnum_TNodeKind__J4tQd214cfE1JQGaIm9aMZg;
typedef NU32 tySet_tyEnum_TNodeFlag__fdrKmI78CfFMjQBGh89cd4A;
struct tyObject_PackedItemId__FzcXUzSZ9cNfGYsfibgjWlQ {
NU32 module;
NI32 item;
};
struct tyObject_PackedLineInfo__Q9bbXLBurHo2r5TyF6UBshg {
NU16 line;
NI16 col;
NU32 file;
};
struct tyObject_PackedNode__7lDGAZiNp4zbO65GEpoKow {
tyEnum_TNodeKind__J4tQd214cfE1JQGaIm9aMZg kind;
tySet_tyEnum_TNodeFlag__fdrKmI78CfFMjQBGh89cd4A flags;
NI32 operand;
tyObject_PackedItemId__FzcXUzSZ9cNfGYsfibgjWlQ typeId_0;
tyObject_PackedLineInfo__Q9bbXLBurHo2r5TyF6UBshg info;
};
struct tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw {
tySequence__29bS0n2QNyO1R7e0qMMOvLA nodes;
};
struct tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ {
NI Field0;
NI Field1;
};
struct tyObject_NimSeqV2__Oq19cjcO1UYpAD7qV2RhlDQ {
NI len;
tyObject_NimSeqPayload__Z0as4CdzHLTrVov9cf38R1g* p;
};
struct tyObject_NimSeqPayload__Z0as4CdzHLTrVov9cf38R1g {
NI cap;
tyObject_PackedNode__7lDGAZiNp4zbO65GEpoKow data[SEQ_DECL_SIZE];
};


#ifndef tySequence__29bS0n2QNyO1R7e0qMMOvLA_Content_PP
#define tySequence__29bS0n2QNyO1R7e0qMMOvLA_Content_PP
struct tySequence__29bS0n2QNyO1R7e0qMMOvLA_Content { NI cap; tyObject_PackedNode__7lDGAZiNp4zbO65GEpoKow data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__29bS0n2QNyO1R7e0qMMOvLA_Content_PP
#define tySequence__29bS0n2QNyO1R7e0qMMOvLA_Content_PP
struct tySequence__29bS0n2QNyO1R7e0qMMOvLA_Content { NI cap; tyObject_PackedNode__7lDGAZiNp4zbO65GEpoKow data[SEQ_DECL_SIZE];};
#endif

      N_LIB_PRIVATE N_NIMCALL(void, alignedDealloc)(void* p, NI align);
static N_INLINE(void, nimZeroMem)(void* p, NI size);
static N_INLINE(void, nimSetMem__systemZmemory_7)(void* a, int v, NI size);
N_LIB_PRIVATE N_NIMCALL(void*, newSeqPayload)(NI cap, NI elemSize, NI elemAlign);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___icZpacked95ast_124)(tySequence__29bS0n2QNyO1R7e0qMMOvLA* dest);
static N_INLINE(NI, span__icZpacked95ast_632)(tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw tree, NI pos);
static N_INLINE(NIM_BOOL, isAtom__icZpacked95ast_325)(tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw tree, NI pos);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(void*, prepareSeqAdd)(NI len, void* p, NI addlen, NI elemSize, NI elemAlign);
N_LIB_PRIVATE N_NIMCALL(void, add__icZpacked95ast_233)(tySequence__29bS0n2QNyO1R7e0qMMOvLA* x, tyObject_PackedNode__7lDGAZiNp4zbO65GEpoKow* value);
N_LIB_PRIVATE N_NIMCALL(void, shrink__icZpacked95ast_148)(tySequence__29bS0n2QNyO1R7e0qMMOvLA* x, NI newLen);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___icZpacked95ast_127)(tySequence__29bS0n2QNyO1R7e0qMMOvLA* dest, tySequence__29bS0n2QNyO1R7e0qMMOvLA src);
N_LIB_PRIVATE N_NIMCALL(void, setLen__icZpacked95ast_140)(tySequence__29bS0n2QNyO1R7e0qMMOvLA* s, NI newlen);
static N_INLINE(void, nextChild__icZpacked95ast_440)(tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw tree, NI* pos);
N_LIB_PRIVATE NIM_CONST tyObject_PackedItemId__FzcXUzSZ9cNfGYsfibgjWlQ nilItemId__icZpacked95ast_13 = {((NU32) 0), ((NI32) -1)}
;
extern NIM_BOOL nimInErrorMode__system_4174;
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___icZpacked95ast_124)(tySequence__29bS0n2QNyO1R7e0qMMOvLA* dest) {
	if ((*dest).p && !((*dest).p->cap & NIM_STRLIT_FLAG)) {
 alignedDealloc((*dest).p, NIM_ALIGNOF(tyObject_PackedNode__7lDGAZiNp4zbO65GEpoKow));
}
}
static N_INLINE(void, nimSetMem__systemZmemory_7)(void* a, int v, NI size) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a, v, ((size_t) (size)));
	(void)(T1_);
}
static N_INLINE(void, nimZeroMem)(void* p, NI size) {
	nimSetMem__systemZmemory_7(p, ((int) 0), size);
}
N_LIB_PRIVATE N_NIMCALL(tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw, newTreeFrom__icZpacked95ast_117)(tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw old) {
	tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw result;
	nimZeroMem((void*)(&result), sizeof(tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw));
	result.nodes.len = 0; result.nodes.p = (tySequence__29bS0n2QNyO1R7e0qMMOvLA_Content*) newSeqPayload(0, sizeof(tyObject_PackedNode__7lDGAZiNp4zbO65GEpoKow), NIM_ALIGNOF(tyObject_PackedNode__7lDGAZiNp4zbO65GEpoKow));
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___icZpacked95ast_486)(tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw* dest, tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw src) {
	if ((*dest).nodes.p != src.nodes.p) {	eqdestroy___icZpacked95ast_124((&(*dest).nodes));
	}
(*dest).nodes.len = src.nodes.len; (*dest).nodes.p = src.nodes.p;
}
static N_INLINE(NIM_BOOL, isAtom__icZpacked95ast_325)(tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw tree, NI pos) {
	NIM_BOOL result;
	result = (NIM_BOOL)0;
	result = (tree.nodes.p->data[pos].kind <= ((tyEnum_TNodeKind__J4tQd214cfE1JQGaIm9aMZg) 23));
	return result;
}
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (NIM_BOOL*)0;
	result = (&nimInErrorMode__system_4174);
	return result;
}
static N_INLINE(NI, span__icZpacked95ast_632)(tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw tree, NI pos) {
	NI result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI)0;
	{
		{
			NIM_BOOL T4_;
			T4_ = (NIM_BOOL)0;
			T4_ = isAtom__icZpacked95ast_325(tree, pos);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			if (!T4_) goto LA5_;
			result = ((NI) 1);
			goto LA1;
		}
		LA5_: ;
		result = ((NI) (tree.nodes.p->data[pos].operand));
	} LA1: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ, sons2__icZpacked95ast_636)(tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw tree, NI n) {
	tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ result;
	NI a;
	NI b;
	NI T1_;
	NI colontmp_;
	NI colontmp__2;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyTuple__1v9bKyksXWMsm0vNwmZ4EuQ));
	a = (NI)(n + ((NI) 1));
	T1_ = (NI)0;
	T1_ = span__icZpacked95ast_632(tree, a);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	b = (NI)(a + T1_);
	colontmp_ = a;
	colontmp__2 = b;
	result.Field0 = colontmp_;
	result.Field1 = colontmp__2;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, add__icZpacked95ast_233)(tySequence__29bS0n2QNyO1R7e0qMMOvLA* x, tyObject_PackedNode__7lDGAZiNp4zbO65GEpoKow* value) {
	NI oldLen;
	NI T1_;
	tyObject_NimSeqV2__Oq19cjcO1UYpAD7qV2RhlDQ* xu;
	NIM_BOOL colontmp_;
	T1_ = (*x).len;
	oldLen = T1_;
	xu = ((tyObject_NimSeqV2__Oq19cjcO1UYpAD7qV2RhlDQ*) (x));
	colontmp_ = (NIM_BOOL)0;
	{
		colontmp_ = ((*xu).p == ((tyObject_NimSeqPayload__Z0as4CdzHLTrVov9cf38R1g*) NIM_NIL));
		{
			if (!colontmp_) goto LA5_;
			goto LA2;
		}
		LA5_: ;
		colontmp_ = ((*(*xu).p).cap < (NI)(oldLen + ((NI) 1)));
	} LA2: ;
	{
		void* T11_;
		if (!colontmp_) goto LA9_;
		T11_ = (void*)0;
		T11_ = prepareSeqAdd(oldLen, ((void*) ((*xu).p)), ((NI) 1), ((NI) 28), ((NI) 4));
		(*xu).p = ((tyObject_NimSeqPayload__Z0as4CdzHLTrVov9cf38R1g*) (T11_));
	}
	LA9_: ;
	(*xu).len = (NI)(oldLen + ((NI) 1));
	(*(*xu).p).data[oldLen] = (*value);
}
N_LIB_PRIVATE N_NIMCALL(NI, prepare__icZpacked95ast_365)(tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw* tree, tyEnum_TNodeKind__J4tQd214cfE1JQGaIm9aMZg kind, tySet_tyEnum_TNodeFlag__fdrKmI78CfFMjQBGh89cd4A flags, tyObject_PackedItemId__FzcXUzSZ9cNfGYsfibgjWlQ typeId_0, tyObject_PackedLineInfo__Q9bbXLBurHo2r5TyF6UBshg info) {
	NI result;
	NI T1_;
	tyObject_PackedNode__7lDGAZiNp4zbO65GEpoKow T2_;
	result = (NI)0;
	T1_ = (*tree).nodes.len;
	result = T1_;
	nimZeroMem((void*)(&T2_), sizeof(tyObject_PackedNode__7lDGAZiNp4zbO65GEpoKow));
	T2_.kind = kind;
	T2_.flags = flags;
	T2_.operand = ((NI32) 0);
	T2_.info = info;
	T2_.typeId_0 = typeId_0;
	add__icZpacked95ast_233((&(*tree).nodes), (&T2_));
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, patch__icZpacked95ast_403)(tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw* tree, NI pos) {
	NI pos_2;
	NI32 distance;
	NI T1_;
	pos_2 = pos;
	T1_ = (*tree).nodes.len;
	distance = ((NI32) ((NI)(T1_ - pos_2)));
	(*tree).nodes.p->data[pos_2].operand = distance;
}
N_LIB_PRIVATE N_NIMCALL(void, shrink__icZpacked95ast_148)(tySequence__29bS0n2QNyO1R7e0qMMOvLA* x, NI newLen) {
	(*((tyObject_NimSeqV2__Oq19cjcO1UYpAD7qV2RhlDQ*) (x))).len = ((NI) (newLen));
}
N_LIB_PRIVATE N_NIMCALL(void, setLen__icZpacked95ast_140)(tySequence__29bS0n2QNyO1R7e0qMMOvLA* s, NI newlen) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NI oldLen;
		NI T7_;
		tyObject_NimSeqV2__Oq19cjcO1UYpAD7qV2RhlDQ* xu;
		NIM_BOOL colontmp_;
		{
			NI T4_;
			T4_ = (*s).len;
			if (!(((NI) (newlen)) < T4_)) goto LA5_;
			shrink__icZpacked95ast_148(s, newlen);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			goto LA1;
		}
		LA5_: ;
		T7_ = (*s).len;
		oldLen = T7_;
		{
			if (!(((NI) (newlen)) <= oldLen)) goto LA10_;
			goto BeforeRet_;
		}
		LA10_: ;
		xu = ((tyObject_NimSeqV2__Oq19cjcO1UYpAD7qV2RhlDQ*) (s));
		colontmp_ = (NIM_BOOL)0;
		{
			colontmp_ = ((*xu).p == ((tyObject_NimSeqPayload__Z0as4CdzHLTrVov9cf38R1g*) NIM_NIL));
			{
				if (!colontmp_) goto LA15_;
				goto LA12;
			}
			LA15_: ;
			colontmp_ = ((*(*xu).p).cap < ((NI) (newlen)));
		} LA12: ;
		{
			void* T21_;
			if (!colontmp_) goto LA19_;
			T21_ = (void*)0;
			T21_ = prepareSeqAdd(oldLen, ((void*) ((*xu).p)), (NI)(((NI) (newlen)) - oldLen), ((NI) 28), ((NI) 4));
			(*xu).p = ((tyObject_NimSeqPayload__Z0as4CdzHLTrVov9cf38R1g*) (T21_));
		}
		LA19_: ;
		(*xu).len = ((NI) (newlen));
	} LA1: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___icZpacked95ast_130)(tySequence__29bS0n2QNyO1R7e0qMMOvLA* dest, tySequence__29bS0n2QNyO1R7e0qMMOvLA src) {
	if ((*dest).p != src.p) {	eqdestroy___icZpacked95ast_124(dest);
	}
(*dest).len = src.len; (*dest).p = src.p;
}
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___icZpacked95ast_127)(tySequence__29bS0n2QNyO1R7e0qMMOvLA* dest, tySequence__29bS0n2QNyO1R7e0qMMOvLA src) {
	NI T1_;
	NI colontmp_;
	T1_ = src.len;
	setLen__icZpacked95ast_140(dest, T1_);
	colontmp_ = ((NI) 0);
	{
		while (1) {
			{
				NI T6_;
				T6_ = (*dest).len;
				if (!!((colontmp_ < T6_))) goto LA7_;
				goto LA3;
			}
			LA7_: ;
			(*dest).p->data[colontmp_].kind = src.p->data[colontmp_].kind;
			(*dest).p->data[colontmp_].flags = src.p->data[colontmp_].flags;
			(*dest).p->data[colontmp_].operand = src.p->data[colontmp_].operand;
			(*dest).p->data[colontmp_].typeId_0.module = src.p->data[colontmp_].typeId_0.module;
			(*dest).p->data[colontmp_].typeId_0.item = src.p->data[colontmp_].typeId_0.item;
			(*dest).p->data[colontmp_].info.line = src.p->data[colontmp_].info.line;
			(*dest).p->data[colontmp_].info.col = src.p->data[colontmp_].info.col;
			(*dest).p->data[colontmp_].info.file = src.p->data[colontmp_].info.file;
			colontmp_ += ((NI) 1);
		} LA3: ;
	}
}
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___icZpacked95ast_483)(tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw* dest, tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw src) {
	eqcopy___icZpacked95ast_127((&(*dest).nodes), src.nodes);
}
static N_INLINE(void, nextChild__icZpacked95ast_440)(tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw tree, NI* pos) {
	{
		{
			if (!(((tyEnum_TNodeKind__J4tQd214cfE1JQGaIm9aMZg) 23) < tree.nodes.p->data[(*pos)].kind)) goto LA4_;
			(*pos) += ((NI) (tree.nodes.p->data[(*pos)].operand));
			goto LA1;
		}
		LA4_: ;
		(*pos) += ((NI) 1);
	} LA1: ;
}
N_LIB_PRIVATE N_NIMCALL(NI, ithSon__icZpacked95ast_679)(tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw tree, NI n, NI i) {
	NI result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NI)0;
	{
		NI count;
		if (!(((tyEnum_TNodeKind__J4tQd214cfE1JQGaIm9aMZg) 23) < tree.nodes.p->data[n].kind)) goto LA3_;
		count = ((NI) 0);
		{
			NI child;
			NI pos;
			NI last;
			child = (NI)0;
			pos = n;
			last = (NI)(pos + ((NI) (tree.nodes.p->data[pos].operand)));
			pos += ((NI) 1);
			{
				while (1) {
					{
						if (!!((pos < last))) goto LA10_;
						goto LA7;
					}
					LA10_: ;
					child = pos;
					{
						if (!(count == i)) goto LA14_;
						result = child;
						goto BeforeRet_;
					}
					LA14_: ;
					count += ((NI) 1);
					nextChild__icZpacked95ast_440(tree, (&pos));
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				} LA7: ;
			}
		}
	}
	LA3_: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NI, lastSon__icZpacked95ast_697)(tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw tree, NI n) {
	NI result;
	NI32 len;
	result = (NI)0;
	len = tree.nodes.p->data[n].operand;
	result = (NI)(n + ((NI) (len)));
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___icZpacked95ast_480)(tyObject_PackedTree__8otSrA7MENGYESDkEP7nnw* dest) {
	eqdestroy___icZpacked95ast_124((&(*dest).nodes));
}
