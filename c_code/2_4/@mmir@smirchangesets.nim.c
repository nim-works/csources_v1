/* Generated by Nim Compiler v0.1.0-dev.20827 */
#define NIM_INTBITS 64
#define NIM_EmulateOverflowChecks

#include "nimbase.h"
#include <string.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
#define nimfr_(x, y)
#define nimln_(x, y)
typedef struct tyObject_Changeset__qDD4802cbTm0qC3yMBxCwg tyObject_Changeset__qDD4802cbTm0qC3yMBxCwg;
typedef struct tySequence__zZmWEaviOIxzDvlzt0ZnCQ tySequence__zZmWEaviOIxzDvlzt0ZnCQ;
typedef struct tySequence__zZmWEaviOIxzDvlzt0ZnCQ_Content tySequence__zZmWEaviOIxzDvlzt0ZnCQ_Content;
typedef struct tySequence__oe9crvyo9cYzgPivQTONimUA tySequence__oe9crvyo9cYzgPivQTONimUA;
typedef struct tySequence__oe9crvyo9cYzgPivQTONimUA_Content tySequence__oe9crvyo9cYzgPivQTONimUA_Content;
typedef struct tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA;
typedef struct tyObject_TType__9bxl8e9cDuDwfQRcyh9cQYOlQ tyObject_TType__9bxl8e9cDuDwfQRcyh9cQYOlQ;
typedef struct tyObject_TSym__RjHO5eqpy8QqcomFydmCag tyObject_TSym__RjHO5eqpy8QqcomFydmCag;
typedef struct tyObject_TNode__Bujcm1vZNtQEsOsw5ZIYIw tyObject_TNode__Bujcm1vZNtQEsOsw5ZIYIw;
typedef struct tyObject_Row__HhQcROiNYPtBwUbMuAkELQ tyObject_Row__HhQcROiNYPtBwUbMuAkELQ;
typedef struct tyObject_HOslice__RlqXQOhSBmcZ0M7gcBURgw tyObject_HOslice__RlqXQOhSBmcZ0M7gcBURgw;
typedef struct tyObject_NimSeqV2__DE4W1mSr1f49bHgQB6ifz3A tyObject_NimSeqV2__DE4W1mSr1f49bHgQB6ifz3A;
typedef struct tyObject_NimSeqPayload__rv0uZVEf309aNc5R9c8kKmQw tyObject_NimSeqPayload__rv0uZVEf309aNc5R9c8kKmQw;
typedef struct tyObject_PreparedChangeset__by5PLYgQ9bgVJfzK8kYLIJQ tyObject_PreparedChangeset__by5PLYgQ9bgVJfzK8kYLIJQ;
typedef struct tyObject_SourceMap__qRyYkMTiajjNphqhDpsTmA tyObject_SourceMap__qRyYkMTiajjNphqhDpsTmA;
typedef struct tyObject_Store__hOo158crQbwnU7mvDmmMdg tyObject_Store__hOo158crQbwnU7mvDmmMdg;
typedef struct tySequence__XrT6wRHqo12fVwXeGBWNEw tySequence__XrT6wRHqo12fVwXeGBWNEw;
typedef struct tySequence__XrT6wRHqo12fVwXeGBWNEw_Content tySequence__XrT6wRHqo12fVwXeGBWNEw_Content;
typedef struct tySequence__lQTirUbOV7ZB259aMasl2fg tySequence__lQTirUbOV7ZB259aMasl2fg;
typedef struct tySequence__lQTirUbOV7ZB259aMasl2fg_Content tySequence__lQTirUbOV7ZB259aMasl2fg_Content;
struct tySequence__zZmWEaviOIxzDvlzt0ZnCQ {
  NI len; tySequence__zZmWEaviOIxzDvlzt0ZnCQ_Content* p;
};
struct tySequence__oe9crvyo9cYzgPivQTONimUA {
  NI len; tySequence__oe9crvyo9cYzgPivQTONimUA_Content* p;
};
struct tyObject_Changeset__qDD4802cbTm0qC3yMBxCwg {
tySequence__zZmWEaviOIxzDvlzt0ZnCQ tree;
tySequence__zZmWEaviOIxzDvlzt0ZnCQ nodes;
tySequence__oe9crvyo9cYzgPivQTONimUA rows;
NU32 numTemps;
NI32 pos;
};
typedef NU8 tyEnum_MirNodeKind__DpKrCfOhhw2MWR8CGQZZkA;
typedef NU8 tySet_tyEnum_GeneralEffect__zH9cIJw6WOJ1ac9addQCEHTQ;
typedef NU16 tyEnum_TMagic__dZ79abhKgFxImGqMv0skU9cQ;
typedef NU8 tyEnum_EffectKind__hPDwBcEacbhxjOsP9bBOBuA;
struct tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA {
tyObject_TType__9bxl8e9cDuDwfQRcyh9cQYOlQ* typ;
tyEnum_MirNodeKind__DpKrCfOhhw2MWR8CGQZZkA kind;
union{
struct {tyObject_TSym__RjHO5eqpy8QqcomFydmCag* sym;
} _kind_1;
struct {tyObject_TSym__RjHO5eqpy8QqcomFydmCag* field;
} _kind_2;
struct {tyObject_TNode__Bujcm1vZNtQEsOsw5ZIYIw* lit;
} _kind_3;
struct {NU32 temp;
} _kind_4;
struct {NU32 position;
} _kind_5;
struct {tySet_tyEnum_GeneralEffect__zH9cIJw6WOJ1ac9addQCEHTQ effects;
} _kind_6;
struct {tyEnum_TMagic__dZ79abhKgFxImGqMv0skU9cQ magic;
} _kind_7;
struct {NU32 param;
} _kind_8;
struct {NU32 label;
} _kind_9;
struct {tyEnum_MirNodeKind__DpKrCfOhhw2MWR8CGQZZkA start;
} _kind_10;
struct {tyObject_TNode__Bujcm1vZNtQEsOsw5ZIYIw* node;
} _kind_11;
struct {tyEnum_EffectKind__hPDwBcEacbhxjOsP9bBOBuA effect;
} _kind_12;
struct {NI len;
} _kind_13;
};
};
struct tyObject_HOslice__RlqXQOhSBmcZ0M7gcBURgw {
NU32 a;
NU32 b;
};
struct tyObject_Row__HhQcROiNYPtBwUbMuAkELQ {
tyObject_HOslice__RlqXQOhSBmcZ0M7gcBURgw orig;
tyObject_HOslice__RlqXQOhSBmcZ0M7gcBURgw src;
NU32 source;
};
struct tyObject_NimSeqV2__DE4W1mSr1f49bHgQB6ifz3A {
NI len;
tyObject_NimSeqPayload__rv0uZVEf309aNc5R9c8kKmQw* p;
};
struct tyObject_NimSeqPayload__rv0uZVEf309aNc5R9c8kKmQw {
NI cap;
tyObject_Row__HhQcROiNYPtBwUbMuAkELQ data[SEQ_DECL_SIZE];
};
struct tyObject_PreparedChangeset__by5PLYgQ9bgVJfzK8kYLIJQ {
tySequence__zZmWEaviOIxzDvlzt0ZnCQ nodes;
tySequence__oe9crvyo9cYzgPivQTONimUA rows;
NI diff;
NI stagingSize;
};
typedef struct {
N_NIMCALL_PTR(NI, ClP_0) (tyObject_Row__HhQcROiNYPtBwUbMuAkELQ x, tyObject_Row__HhQcROiNYPtBwUbMuAkELQ y, void* ClE_0);
void* ClE_0;
} tyProc__glT7s5ClOedK9cRt9ayFuJAA;
typedef NU8 tyEnum_SortOrder__8iBc6wlNqBa9cju9cUAhUAxA;
typedef N_CLOSURE_PTR(NI, TM__35hmQbypay9cMqcI4a745tA_2) (tyObject_Row__HhQcROiNYPtBwUbMuAkELQ x, tyObject_Row__HhQcROiNYPtBwUbMuAkELQ y);
typedef N_CLOSURE_PTR(NI, TM__35hmQbypay9cMqcI4a745tA_3) (tyObject_Row__HhQcROiNYPtBwUbMuAkELQ x, tyObject_Row__HhQcROiNYPtBwUbMuAkELQ y);
typedef N_CLOSURE_PTR(NI, TM__35hmQbypay9cMqcI4a745tA_4) (tyObject_Row__HhQcROiNYPtBwUbMuAkELQ x, tyObject_Row__HhQcROiNYPtBwUbMuAkELQ y, void* ClE_0);
struct tySequence__XrT6wRHqo12fVwXeGBWNEw {
  NI len; tySequence__XrT6wRHqo12fVwXeGBWNEw_Content* p;
};
struct tyObject_Store__hOo158crQbwnU7mvDmmMdg {
tySequence__XrT6wRHqo12fVwXeGBWNEw data;
};
struct tySequence__lQTirUbOV7ZB259aMasl2fg {
  NI len; tySequence__lQTirUbOV7ZB259aMasl2fg_Content* p;
};
struct tyObject_SourceMap__qRyYkMTiajjNphqhDpsTmA {
tyObject_Store__hOo158crQbwnU7mvDmmMdg source;
tySequence__lQTirUbOV7ZB259aMasl2fg map;
};


#ifndef tySequence__zZmWEaviOIxzDvlzt0ZnCQ_Content_PP
#define tySequence__zZmWEaviOIxzDvlzt0ZnCQ_Content_PP
struct tySequence__zZmWEaviOIxzDvlzt0ZnCQ_Content { NI cap; tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__zZmWEaviOIxzDvlzt0ZnCQ_Content_PP
#define tySequence__zZmWEaviOIxzDvlzt0ZnCQ_Content_PP
struct tySequence__zZmWEaviOIxzDvlzt0ZnCQ_Content { NI cap; tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__oe9crvyo9cYzgPivQTONimUA_Content_PP
#define tySequence__oe9crvyo9cYzgPivQTONimUA_Content_PP
struct tySequence__oe9crvyo9cYzgPivQTONimUA_Content { NI cap; tyObject_Row__HhQcROiNYPtBwUbMuAkELQ data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__oe9crvyo9cYzgPivQTONimUA_Content_PP
#define tySequence__oe9crvyo9cYzgPivQTONimUA_Content_PP
struct tySequence__oe9crvyo9cYzgPivQTONimUA_Content { NI cap; tyObject_Row__HhQcROiNYPtBwUbMuAkELQ data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__zZmWEaviOIxzDvlzt0ZnCQ_Content_PP
#define tySequence__zZmWEaviOIxzDvlzt0ZnCQ_Content_PP
struct tySequence__zZmWEaviOIxzDvlzt0ZnCQ_Content { NI cap; tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__oe9crvyo9cYzgPivQTONimUA_Content_PP
#define tySequence__oe9crvyo9cYzgPivQTONimUA_Content_PP
struct tySequence__oe9crvyo9cYzgPivQTONimUA_Content { NI cap; tyObject_Row__HhQcROiNYPtBwUbMuAkELQ data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__XrT6wRHqo12fVwXeGBWNEw_Content_PP
#define tySequence__XrT6wRHqo12fVwXeGBWNEw_Content_PP
struct tySequence__XrT6wRHqo12fVwXeGBWNEw_Content { NI cap; tyObject_TNode__Bujcm1vZNtQEsOsw5ZIYIw* data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__lQTirUbOV7ZB259aMasl2fg_Content_PP
#define tySequence__lQTirUbOV7ZB259aMasl2fg_Content_PP
struct tySequence__lQTirUbOV7ZB259aMasl2fg_Content { NI cap; NU32 data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__lQTirUbOV7ZB259aMasl2fg_Content_PP
#define tySequence__lQTirUbOV7ZB259aMasl2fg_Content_PP
struct tySequence__lQTirUbOV7ZB259aMasl2fg_Content { NI cap; NU32 data[SEQ_DECL_SIZE];};
#endif

      static N_INLINE(void, nimZeroMem)(void* p, NI size);
static N_INLINE(void, nimSetMem__systemZmemory_7)(void* a, int v, NI size);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___mirZastgen_1691)(tySequence__zZmWEaviOIxzDvlzt0ZnCQ* dest, tySequence__zZmWEaviOIxzDvlzt0ZnCQ src);
N_LIB_PRIVATE N_NIMCALL(tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA*, child__mirZmirtrees_573)(tySequence__zZmWEaviOIxzDvlzt0ZnCQ* tree, NI32 n, NI index);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___mirZmirtrees_917)(tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA* dest, tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA src);
static N_INLINE(NU32, max__mirZmirchangesets_114)(NU32 x, NU32 y);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___mirZmirtrees_914)(tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA* dest);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(NI32, sibling__mirZmirtrees_359)(tySequence__zZmWEaviOIxzDvlzt0ZnCQ tree, NI32 n);
N_LIB_PRIVATE N_NIMCALL(void*, prepareSeqAdd)(NI len, void* p, NI addlen, NI elemSize, NI elemAlign);
N_LIB_PRIVATE N_NIMCALL(void, sort__mirZmirchangesets_271)(tyObject_Row__HhQcROiNYPtBwUbMuAkELQ* a, NI aLen_0, tyProc__glT7s5ClOedK9cRt9ayFuJAA cmp, tyEnum_SortOrder__8iBc6wlNqBa9cju9cUAhUAxA order);
N_LIB_PRIVATE N_NIMCALL(tySequence__oe9crvyo9cYzgPivQTONimUA, newSeq__mirZmirchangesets_283)(NI len);
N_LIB_PRIVATE N_NIMCALL(void, newSeq__mirZmirchangesets_287)(tySequence__oe9crvyo9cYzgPivQTONimUA* s, NI len);
N_LIB_PRIVATE N_NIMCALL(void, shrink__mirZmirchangesets_291)(tySequence__oe9crvyo9cYzgPivQTONimUA* x, NI newLen);
N_LIB_PRIVATE N_NIMCALL(void, setLen__mirZmirchangesets_295)(tySequence__oe9crvyo9cYzgPivQTONimUA* s, NI newlen);
N_LIB_PRIVATE N_NIMCALL(void, mergeAlt__mirZmirchangesets_357)(tyObject_Row__HhQcROiNYPtBwUbMuAkELQ* a, NI aLen_0, tyObject_Row__HhQcROiNYPtBwUbMuAkELQ* b, NI bLen_0, NI lo, NI m, NI hi, tyProc__glT7s5ClOedK9cRt9ayFuJAA cmp, tyEnum_SortOrder__8iBc6wlNqBa9cju9cUAhUAxA order);
static N_INLINE(NI, star___pureZalgorithm_8)(NI x, tyEnum_SortOrder__8iBc6wlNqBa9cju9cUAhUAxA order);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___mirZmirchangesets_330)(tySequence__oe9crvyo9cYzgPivQTONimUA* dest);
N_LIB_PRIVATE N_NIMCALL(void, alignedDealloc)(void* p, NI align);
N_LIB_PRIVATE N_NIMCALL(NI, colonanonymous___mirZmirchangesets_257)(tyObject_Row__HhQcROiNYPtBwUbMuAkELQ a, tyObject_Row__HhQcROiNYPtBwUbMuAkELQ b);
static N_INLINE(NI, len__mirZmirgen_992)(tyObject_HOslice__RlqXQOhSBmcZ0M7gcBURgw x);
static N_INLINE(NU32, X5BX5D___mirZsourcemaps_21)(tyObject_SourceMap__qRyYkMTiajjNphqhDpsTmA* m, NU32 i);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___mirZmirchangesets_577)(tyObject_Changeset__qDD4802cbTm0qC3yMBxCwg* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___mirZastgen_1688)(tySequence__zZmWEaviOIxzDvlzt0ZnCQ* dest);
N_LIB_PRIVATE N_NIMCALL(void, setLen__mirZastgen_1838)(tySequence__lQTirUbOV7ZB259aMasl2fg* s, NI newlen);
N_LIB_PRIVATE N_NIMCALL(void, moveRight__mirZmirchangesets_647)(NU32* x, NI xLen_0, NI src, NI dest, NI len);
N_LIB_PRIVATE N_NIMCALL(void, moveLeft__mirZmirchangesets_706)(NU32* x, NI xLen_0, NI src, NI dest, NI len);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___mirZmirchangesets_994)(tyObject_PreparedChangeset__by5PLYgQ9bgVJfzK8kYLIJQ* dest);
N_LIB_PRIVATE N_NIMCALL(void, setLen__mirZastgen_1707)(tySequence__zZmWEaviOIxzDvlzt0ZnCQ* s, NI newlen);
N_LIB_PRIVATE N_NIMCALL(void, moveRight__mirZmirchangesets_854)(tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA* x, NI xLen_0, NI src, NI dest, NI len);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___mirZmirtrees_920)(tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA* dest, tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA src);
N_LIB_PRIVATE N_NIMCALL(void, moveLeft__mirZmirchangesets_892)(tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA* x, NI xLen_0, NI src, NI dest, NI len);
N_LIB_PRIVATE N_NIMCALL(void, add__mirZmirchangesets_138)(tySequence__oe9crvyo9cYzgPivQTONimUA* x, tyObject_Row__HhQcROiNYPtBwUbMuAkELQ value);
static N_INLINE(tyObject_Row__HhQcROiNYPtBwUbMuAkELQ, row__mirZmirchangesets_36)(NI32 start, NI32 fin, tyObject_HOslice__RlqXQOhSBmcZ0M7gcBURgw src, NI32 source);
static N_INLINE(tyObject_HOslice__RlqXQOhSBmcZ0M7gcBURgw, span__mirZmirchangesets_43)(NU32 a, NU32 b);
static N_INLINE(tyObject_HOslice__RlqXQOhSBmcZ0M7gcBURgw, empty__mirZmirchangesets_226)(void);
extern NIM_BOOL nimInErrorMode__system_4174;
static N_INLINE(void, nimSetMem__systemZmemory_7)(void* a, int v, NI size) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a, v, ((size_t) (size)));
	(void)(T1_);
}
static N_INLINE(void, nimZeroMem)(void* p, NI size) {
	nimSetMem__systemZmemory_7(p, ((int) 0), size);
}
static N_INLINE(NU32, max__mirZmirchangesets_114)(NU32 x, NU32 y) {
	NU32 result;
	result = (NU32)0;
	{
		{
			if (!((NU32)(y) <= (NU32)(x))) goto LA4_;
			result = x;
			goto LA1;
		}
		LA4_: ;
		result = y;
	} LA1: ;
	return result;
}
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (NIM_BOOL*)0;
	result = (&nimInErrorMode__system_4174);
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_Changeset__qDD4802cbTm0qC3yMBxCwg, initChangeset__mirZmirchangesets_100)(tySequence__zZmWEaviOIxzDvlzt0ZnCQ tree) {
	tyObject_Changeset__qDD4802cbTm0qC3yMBxCwg result;
NIM_BOOL oldNimErrFin9_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyObject_Changeset__qDD4802cbTm0qC3yMBxCwg));
	eqcopy___mirZastgen_1691((&result.tree), tree);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		NI32 i;
		tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA* n;
		NI i_2;
		NI L;
		NI T2_;
		i = (NI32)0;
		n = (tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA*)0;
		i_2 = ((NI) 0);
		T2_ = tree.len;
		L = T2_;
		{
			while (1) {
				tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA ent;
				NIM_BOOL colontmp_;
				{
					if (!!((i_2 < L))) goto LA7_;
					goto LA4;
				}
				LA7_: ;
				nimZeroMem((void*)(&ent), sizeof(tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA));
				i = ((NI32) (i_2));
				n = (&tree.p->data[i_2]);
				colontmp_ = (NIM_BOOL)0;
				{
					tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA* colontmp__2;
					colontmp_ = ((*n).kind == ((tyEnum_MirNodeKind__DpKrCfOhhw2MWR8CGQZZkA) 10) || (*n).kind == ((tyEnum_MirNodeKind__DpKrCfOhhw2MWR8CGQZZkA) 11) || (*n).kind == ((tyEnum_MirNodeKind__DpKrCfOhhw2MWR8CGQZZkA) 12));
					{
						if (!!(colontmp_)) goto LA13_;
						goto LA10;
					}
					LA13_: ;
					colontmp__2 = child__mirZmirtrees_573((&tree), i, ((NI) 0));
					if (NIM_UNLIKELY(*nimErr_)) goto LA9_;
					eqcopy___mirZmirtrees_917((&ent), (*colontmp__2));
					if (NIM_UNLIKELY(*nimErr_)) goto LA9_;
					colontmp_ = (ent.kind == ((tyEnum_MirNodeKind__DpKrCfOhhw2MWR8CGQZZkA) 5));
				} LA10: ;
				{
					NU32 T19_;
					if (!colontmp_) goto LA17_;
					T19_ = (NU32)0;
					T19_ = max__mirZmirchangesets_114((NU32)((NU32)(ent._kind_4.temp) + (NU32)(((NU32) 1))), result.numTemps);
					if (NIM_UNLIKELY(*nimErr_)) goto LA9_;
					result.numTemps = T19_;
				}
				LA17_: ;
				i_2 += ((NI) 1);
				{
					LA9_:;
				}
				{
					oldNimErrFin9_ = *nimErr_; *nimErr_ = NIM_FALSE;
					eqdestroy___mirZmirtrees_914((&ent));
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					*nimErr_ = oldNimErrFin9_;
				}
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			} LA4: ;
		}
	}
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NU32, getTemp__mirZmirchangesets_119)(tyObject_Changeset__qDD4802cbTm0qC3yMBxCwg* c) {
	NU32 result;
	result = (NU32)0;
	result = (*c).numTemps;
	(*c).numTemps += ((NI) 1);
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, skip__mirZmirchangesets_245)(tyObject_Changeset__qDD4802cbTm0qC3yMBxCwg* c, NI num) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NI _;
		NI colontmp_;
		NI i;
		_ = (NI)0;
		colontmp_ = (NI)0;
		colontmp_ = ((NI) (num));
		i = ((NI) 0);
		{
			while (1) {
				NI32 T8_;
				{
					if (!!((i < colontmp_))) goto LA6_;
					goto LA3;
				}
				LA6_: ;
				_ = i;
				T8_ = (NI32)0;
				T8_ = sibling__mirZmirtrees_359((*c).tree, (*c).pos);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				(*c).pos = T8_;
				i += ((NI) 1);
			} LA3: ;
		}
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, add__mirZmirchangesets_138)(tySequence__oe9crvyo9cYzgPivQTONimUA* x, tyObject_Row__HhQcROiNYPtBwUbMuAkELQ value) {
	NI oldLen;
	NI T1_;
	tyObject_NimSeqV2__DE4W1mSr1f49bHgQB6ifz3A* xu;
	NIM_BOOL colontmp_;
	T1_ = (*x).len;
	oldLen = T1_;
	xu = ((tyObject_NimSeqV2__DE4W1mSr1f49bHgQB6ifz3A*) (x));
	colontmp_ = (NIM_BOOL)0;
	{
		colontmp_ = ((*xu).p == ((tyObject_NimSeqPayload__rv0uZVEf309aNc5R9c8kKmQw*) NIM_NIL));
		{
			if (!colontmp_) goto LA5_;
			goto LA2;
		}
		LA5_: ;
		colontmp_ = ((*(*xu).p).cap < (NI)(oldLen + ((NI) 1)));
	} LA2: ;
	{
		void* T11_;
		if (!colontmp_) goto LA9_;
		T11_ = (void*)0;
		T11_ = prepareSeqAdd(oldLen, ((void*) ((*xu).p)), ((NI) 1), ((NI) 20), ((NI) 4));
		(*xu).p = ((tyObject_NimSeqPayload__rv0uZVEf309aNc5R9c8kKmQw*) (T11_));
	}
	LA9_: ;
	(*xu).len = (NI)(oldLen + ((NI) 1));
	(*(*xu).p).data[oldLen] = value;
}
N_LIB_PRIVATE N_NIMCALL(void, shrink__mirZmirchangesets_291)(tySequence__oe9crvyo9cYzgPivQTONimUA* x, NI newLen) {
	(*((tyObject_NimSeqV2__DE4W1mSr1f49bHgQB6ifz3A*) (x))).len = ((NI) (newLen));
}
N_LIB_PRIVATE N_NIMCALL(void, setLen__mirZmirchangesets_295)(tySequence__oe9crvyo9cYzgPivQTONimUA* s, NI newlen) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NI oldLen;
		NI T7_;
		tyObject_NimSeqV2__DE4W1mSr1f49bHgQB6ifz3A* xu;
		NIM_BOOL colontmp_;
		{
			NI T4_;
			T4_ = (*s).len;
			if (!(((NI) (newlen)) < T4_)) goto LA5_;
			shrink__mirZmirchangesets_291(s, newlen);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			goto LA1;
		}
		LA5_: ;
		T7_ = (*s).len;
		oldLen = T7_;
		{
			if (!(((NI) (newlen)) <= oldLen)) goto LA10_;
			goto BeforeRet_;
		}
		LA10_: ;
		xu = ((tyObject_NimSeqV2__DE4W1mSr1f49bHgQB6ifz3A*) (s));
		colontmp_ = (NIM_BOOL)0;
		{
			colontmp_ = ((*xu).p == ((tyObject_NimSeqPayload__rv0uZVEf309aNc5R9c8kKmQw*) NIM_NIL));
			{
				if (!colontmp_) goto LA15_;
				goto LA12;
			}
			LA15_: ;
			colontmp_ = ((*(*xu).p).cap < ((NI) (newlen)));
		} LA12: ;
		{
			void* T21_;
			if (!colontmp_) goto LA19_;
			T21_ = (void*)0;
			T21_ = prepareSeqAdd(oldLen, ((void*) ((*xu).p)), (NI)(((NI) (newlen)) - oldLen), ((NI) 20), ((NI) 4));
			(*xu).p = ((tyObject_NimSeqPayload__rv0uZVEf309aNc5R9c8kKmQw*) (T21_));
		}
		LA19_: ;
		(*xu).len = ((NI) (newlen));
	} LA1: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, newSeq__mirZmirchangesets_287)(tySequence__oe9crvyo9cYzgPivQTONimUA* s, NI len) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	shrink__mirZmirchangesets_291(s, ((NI) 0));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	setLen__mirZmirchangesets_295(s, len);
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(tySequence__oe9crvyo9cYzgPivQTONimUA, newSeq__mirZmirchangesets_283)(NI len) {
	tySequence__oe9crvyo9cYzgPivQTONimUA result;
	result.len = 0; result.p = NIM_NIL;
	newSeq__mirZmirchangesets_287((&result), len);
	return result;
}
static N_INLINE(NI, star___pureZalgorithm_8)(NI x, tyEnum_SortOrder__8iBc6wlNqBa9cju9cUAhUAxA order) {
	NI result;
	NI y;
	result = (NI)0;
	y = (NI)(order - ((NI) 1));
	result = (NI)((NI)(x ^ y) - y);
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, mergeAlt__mirZmirchangesets_357)(tyObject_Row__HhQcROiNYPtBwUbMuAkELQ* a, NI aLen_0, tyObject_Row__HhQcROiNYPtBwUbMuAkELQ* b, NI bLen_0, NI lo, NI m, NI hi, tyProc__glT7s5ClOedK9cRt9ayFuJAA cmp, tyEnum_SortOrder__8iBc6wlNqBa9cju9cUAhUAxA order) {
	NI j;
	NI bb;
	NI i;
	NI k;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NI T3_;
		NI T4_;
		T3_ = (NI)0;
		T3_ = cmp.ClE_0? cmp.ClP_0(a[m], a[(NI)(m + ((NI) 1))], cmp.ClE_0):((TM__35hmQbypay9cMqcI4a745tA_2)(cmp.ClP_0))(a[m], a[(NI)(m + ((NI) 1))]);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		T4_ = (NI)0;
		T4_ = star___pureZalgorithm_8(T3_, order);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		if (!(T4_ <= ((NI) 0))) goto LA5_;
		goto BeforeRet_;
	}
	LA5_: ;
	j = lo;
	bb = ((NI) 0);
	{
		while (1) {
			{
				if (!!((j <= m))) goto LA11_;
				goto LA8;
			}
			LA11_: ;
			b[bb] = a[j];
			nimZeroMem((void*)(&a[j]), sizeof(tyObject_Row__HhQcROiNYPtBwUbMuAkELQ));
			bb += ((NI) 1);
			j += ((NI) 1);
		} LA8: ;
	}
	i = ((NI) 0);
	k = lo;
	{
		while (1) {
			NIM_BOOL colontmp_;
			colontmp_ = (NIM_BOOL)0;
			{
				colontmp_ = (k < j);
				{
					if (!!(colontmp_)) goto LA18_;
					goto LA15;
				}
				LA18_: ;
				colontmp_ = (j <= hi);
			} LA15: ;
			{
				if (!!(colontmp_)) goto LA22_;
				goto LA14;
			}
			LA22_: ;
			{
				{
					NI T27_;
					NI T28_;
					T27_ = (NI)0;
					T27_ = cmp.ClE_0? cmp.ClP_0(b[i], a[j], cmp.ClE_0):((TM__35hmQbypay9cMqcI4a745tA_3)(cmp.ClP_0))(b[i], a[j]);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					T28_ = (NI)0;
					T28_ = star___pureZalgorithm_8(T27_, order);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					if (!(T28_ <= ((NI) 0))) goto LA29_;
					a[k] = b[i];
					nimZeroMem((void*)(&b[i]), sizeof(tyObject_Row__HhQcROiNYPtBwUbMuAkELQ));
					i += ((NI) 1);
					goto LA24;
				}
				LA29_: ;
				a[k] = a[j];
				nimZeroMem((void*)(&a[j]), sizeof(tyObject_Row__HhQcROiNYPtBwUbMuAkELQ));
				j += ((NI) 1);
			} LA24: ;
			k += ((NI) 1);
		} LA14: ;
	}
	{
		while (1) {
			{
				if (!!((k < j))) goto LA35_;
				goto LA32;
			}
			LA35_: ;
			a[k] = b[i];
			nimZeroMem((void*)(&b[i]), sizeof(tyObject_Row__HhQcROiNYPtBwUbMuAkELQ));
			k += ((NI) 1);
			i += ((NI) 1);
		} LA32: ;
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___mirZmirchangesets_330)(tySequence__oe9crvyo9cYzgPivQTONimUA* dest) {
	if ((*dest).p && !((*dest).p->cap & NIM_STRLIT_FLAG)) {
 alignedDealloc((*dest).p, NIM_ALIGNOF(tyObject_Row__HhQcROiNYPtBwUbMuAkELQ));
}
}
N_LIB_PRIVATE N_NIMCALL(void, sort__mirZmirchangesets_271)(tyObject_Row__HhQcROiNYPtBwUbMuAkELQ* a, NI aLen_0, tyProc__glT7s5ClOedK9cRt9ayFuJAA cmp, tyEnum_SortOrder__8iBc6wlNqBa9cju9cUAhUAxA order) {
	tySequence__oe9crvyo9cYzgPivQTONimUA b;
	NI n;
	NI s;
NIM_BOOL oldNimErrFin1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	b.len = 0; b.p = NIM_NIL;
	n = aLen_0;
	b = newSeq__mirZmirchangesets_283(((NI) ((NI)(n / ((NI) 2)))));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	s = ((NI) 1);
	{
		while (1) {
			NI m;
			{
				if (!!((s < n))) goto LA6_;
				goto LA3;
			}
			LA6_: ;
			m = (NI)((NI)(n - ((NI) 1)) - s);
			{
				while (1) {
					{
						if (!!((((NI) 0) <= m))) goto LA12_;
						goto LA9;
					}
					LA12_: ;
					mergeAlt__mirZmirchangesets_357(a, aLen_0, b.p->data, b.len, (((NI)((NI)(m - s) + ((NI) 1)) >= ((NI) 0)) ? (NI)((NI)(m - s) + ((NI) 1)) : ((NI) 0)), m, (NI)(m + s), cmp, order);
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
					m -= (NI)(s * ((NI) 2));
				} LA9: ;
			}
			s = (NI)(s * ((NI) 2));
		} LA3: ;
	}
	{
		LA1_:;
	}
	{
		oldNimErrFin1_ = *nimErr_; *nimErr_ = NIM_FALSE;
		eqdestroy___mirZmirchangesets_330((&b));
		*nimErr_ = oldNimErrFin1_;
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(NI, colonanonymous___mirZmirchangesets_257)(tyObject_Row__HhQcROiNYPtBwUbMuAkELQ a, tyObject_Row__HhQcROiNYPtBwUbMuAkELQ b) {
	NI result;
	result = (NI)0;
	result = (NI)(((NI) (a.orig.a)) - ((NI) (b.orig.a)));
	{
		if (!(result == ((NI) 0))) goto LA3_;
		result = (NI)(((NI) (a.orig.b)) - ((NI) (b.orig.b)));
	}
	LA3_: ;
	return result;
}
static N_INLINE(NI, len__mirZmirgen_992)(tyObject_HOslice__RlqXQOhSBmcZ0M7gcBURgw x) {
	NI result;
	result = (NI)0;
	result = ((NI) ((NU32)((NU32)(x.b) - (NU32)(x.a))));
	return result;
}
static N_INLINE(NU32, X5BX5D___mirZsourcemaps_21)(tyObject_SourceMap__qRyYkMTiajjNphqhDpsTmA* m, NU32 i) {
	NU32 result;
	result = (NU32)0;
	result = (*m).map.p->data[i];
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___mirZmirchangesets_577)(tyObject_Changeset__qDD4802cbTm0qC3yMBxCwg* dest) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	eqdestroy___mirZastgen_1688((&(*dest).tree));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	eqdestroy___mirZastgen_1688((&(*dest).nodes));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	eqdestroy___mirZmirchangesets_330((&(*dest).rows));
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_PreparedChangeset__by5PLYgQ9bgVJfzK8kYLIJQ, prepare__mirZmirchangesets_253)(tyObject_Changeset__qDD4802cbTm0qC3yMBxCwg* c, tyObject_SourceMap__qRyYkMTiajjNphqhDpsTmA* sourceMap) {
	tyObject_PreparedChangeset__by5PLYgQ9bgVJfzK8kYLIJQ result;
	tyProc__glT7s5ClOedK9cRt9ayFuJAA T2_;
NIM_BOOL oldNimErrFin1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyObject_PreparedChangeset__by5PLYgQ9bgVJfzK8kYLIJQ));
	T2_.ClP_0 = ((TM__35hmQbypay9cMqcI4a745tA_4) (colonanonymous___mirZmirchangesets_257)); T2_.ClE_0 = NIM_NIL;
	sort__mirZmirchangesets_271((*c).rows.p->data, (*c).rows.len, T2_, ((tyEnum_SortOrder__8iBc6wlNqBa9cju9cUAhUAxA) 1));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	{
		tyObject_Row__HhQcROiNYPtBwUbMuAkELQ* row;
		NI i;
		NI L;
		NI T4_;
		row = (tyObject_Row__HhQcROiNYPtBwUbMuAkELQ*)0;
		i = ((NI) 0);
		T4_ = (*c).rows.len;
		L = T4_;
		{
			while (1) {
				NI T11_;
				NI T12_;
				{
					if (!!((i < L))) goto LA9_;
					goto LA6;
				}
				LA9_: ;
				row = (&(*c).rows.p->data[i]);
				T11_ = (NI)0;
				T11_ = len__mirZmirgen_992((*row).orig);
				if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
				result.diff -= T11_;
				T12_ = (NI)0;
				T12_ = len__mirZmirgen_992((*row).src);
				if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
				result.diff += T12_;
				result.stagingSize = ((result.stagingSize >= result.diff) ? result.stagingSize : result.diff);
				i += ((NI) 1);
			} LA6: ;
		}
	}
	{
		tyObject_Row__HhQcROiNYPtBwUbMuAkELQ* r;
		NI i_2;
		NI L_2;
		NI T14_;
		r = (tyObject_Row__HhQcROiNYPtBwUbMuAkELQ*)0;
		i_2 = ((NI) 0);
		T14_ = (*c).rows.len;
		L_2 = T14_;
		{
			while (1) {
				NU32 T21_;
				{
					if (!!((i_2 < L_2))) goto LA19_;
					goto LA16;
				}
				LA19_: ;
				r = (&(*c).rows.p->data[i_2]);
				T21_ = (NU32)0;
				T21_ = X5BX5D___mirZsourcemaps_21(sourceMap, ((NU32) ((*r).source)));
				if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
				(*r).source = ((NU32) (T21_));
				i_2 += ((NI) 1);
			} LA16: ;
		}
	}
	result.nodes = (*c).nodes;
	(*c).nodes.len = 0; (*c).nodes.p = NIM_NIL;
	result.rows = (*c).rows;
	(*c).rows.len = 0; (*c).rows.p = NIM_NIL;
	{
		LA1_:;
	}
	{
		oldNimErrFin1_ = *nimErr_; *nimErr_ = NIM_FALSE;
		eqdestroy___mirZmirchangesets_577(c);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		*nimErr_ = oldNimErrFin1_;
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, moveRight__mirZmirchangesets_647)(NU32* x, NI xLen_0, NI src, NI dest, NI len) {
	{
		NI i;
		NI colontmp_;
		NI res;
		i = (NI)0;
		colontmp_ = (NI)0;
		colontmp_ = (NI)(((NI) (len)) - ((NI) 1));
		res = colontmp_;
		{
			while (1) {
				{
					if (!!((((NI) 0) <= res))) goto LA6_;
					goto LA3;
				}
				LA6_: ;
				i = res;
				x[(NI)(((NI) (dest)) + i)] = x[(NI)(((NI) (src)) + i)];
				x[(NI)(((NI) (src)) + i)] = 0;
				res -= ((NI) 1);
			} LA3: ;
		}
	}
}
N_LIB_PRIVATE N_NIMCALL(void, moveLeft__mirZmirchangesets_706)(NU32* x, NI xLen_0, NI src, NI dest, NI len) {
	{
		NI i;
		NI colontmp_;
		NI i_2;
		i = (NI)0;
		colontmp_ = (NI)0;
		colontmp_ = ((NI) (len));
		i_2 = ((NI) 0);
		{
			while (1) {
				{
					if (!!((i_2 < colontmp_))) goto LA6_;
					goto LA3;
				}
				LA6_: ;
				i = i_2;
				x[(NI)(((NI) (dest)) + i)] = x[(NI)(((NI) (src)) + i)];
				x[(NI)(((NI) (src)) + i)] = 0;
				i_2 += ((NI) 1);
			} LA3: ;
		}
	}
}
N_LIB_PRIVATE N_NIMCALL(void, updateSourceMap__mirZmirchangesets_623)(tyObject_SourceMap__qRyYkMTiajjNphqhDpsTmA* m, tyObject_PreparedChangeset__by5PLYgQ9bgVJfzK8kYLIJQ* c) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NI T3_;
		T3_ = (*c).rows.len;
		if (!(T3_ == ((NI) 0))) goto LA4_;
		goto BeforeRet_;
	}
	LA4_: ;
	{
		tyObject_Row__HhQcROiNYPtBwUbMuAkELQ* row;
		NU32 writePos;
		NI oldLen;
		NI T7_;
		NI writePos_2;
		NI readPos;
		NI origPos;
		NIM_BOOL colontmp_;
		row = (tyObject_Row__HhQcROiNYPtBwUbMuAkELQ*)0;
		writePos = (NU32)0;
		T7_ = (*m).map.len;
		oldLen = T7_;
		writePos_2 = ((NI) ((*c).rows.p->data[((NI) 0)].orig.a));
		readPos = writePos_2;
		origPos = writePos_2;
		{
			NI start;
			if (!(((NI) 0) < (*c).stagingSize)) goto LA10_;
			start = ((NI) ((*c).rows.p->data[((NI) 0)].orig.a));
			setLen__mirZastgen_1838((&(*m).map), ((NI) ((NI)(oldLen + (*c).stagingSize))));
			readPos = (NI)(start + (*c).stagingSize);
			moveRight__mirZmirchangesets_647((*m).map.p->data, (*m).map.len, ((NI) (start)), ((NI) (readPos)), ((NI) ((NI)(oldLen - start))));
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		LA10_: ;
		{
			NI i;
			tyObject_Row__HhQcROiNYPtBwUbMuAkELQ* row_2;
			NI i_2;
			NI L;
			NI T13_;
			i = (NI)0;
			row_2 = (tyObject_Row__HhQcROiNYPtBwUbMuAkELQ*)0;
			i_2 = ((NI) 0);
			T13_ = (*c).rows.len;
			L = T13_;
			{
				while (1) {
					NI start_2;
					NI T36_;
					NI T37_;
					NI T38_;
					{
						if (!!((i_2 < L))) goto LA18_;
						goto LA15;
					}
					LA18_: ;
					i = i_2;
					row_2 = (&(*c).rows.p->data[i_2]);
					start_2 = ((NI) ((*row_2).orig.a));
					{
						NI L_2;
						if (!(origPos < start_2)) goto LA22_;
						L_2 = (NI)(start_2 - origPos);
						{
							if (!!((readPos == writePos_2))) goto LA26_;
							moveLeft__mirZmirchangesets_706((*m).map.p->data, (*m).map.len, ((NI) (readPos)), ((NI) (writePos_2)), ((NI) (L_2)));
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
						}
						LA26_: ;
						readPos += L_2;
						writePos_2 += L_2;
						origPos += L_2;
					}
					LA22_: ;
					row = row_2;
					writePos = ((NU32) (writePos_2));
					{
						NU32 p;
						p = (NU32)0;
						{
							NU32 i_3;
							NU32 res;
							i_3 = (NU32)0;
							res = (*row).src.a;
							{
								while (1) {
									{
										if (!!(((NU32)(res) < (NU32)((*row).src.b)))) goto LA34_;
										goto LA31;
									}
									LA34_: ;
									i_3 = res;
									p = i_3;
									(*m).map.p->data[(NU32)((NU32)(writePos) + (NU32)((NU32)((NU32)(p) - (NU32)((*row).src.a))))] = ((NU32) ((*row).source));
									res += ((NI) 1);
								} LA31: ;
							}
						}
					}
					T36_ = (NI)0;
					T36_ = len__mirZmirgen_992((*row_2).orig);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					readPos += T36_;
					T37_ = (NI)0;
					T37_ = len__mirZmirgen_992((*row_2).orig);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					origPos += T37_;
					T38_ = (NI)0;
					T38_ = len__mirZmirgen_992((*row_2).src);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					writePos_2 += T38_;
					i_2 += ((NI) 1);
				} LA15: ;
			}
		}
		colontmp_ = (NIM_BOOL)0;
		{
			colontmp_ = (origPos < oldLen);
			{
				if (!!(colontmp_)) goto LA42_;
				goto LA39;
			}
			LA42_: ;
			colontmp_ = !((readPos == writePos_2));
		} LA39: ;
		{
			if (!colontmp_) goto LA46_;
			moveLeft__mirZmirchangesets_706((*m).map.p->data, (*m).map.len, ((NI) (readPos)), ((NI) (writePos_2)), ((NI) ((NI)(oldLen - origPos))));
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		LA46_: ;
		{
			if (!!(((*c).diff == (*c).stagingSize))) goto LA50_;
			setLen__mirZastgen_1838((&(*m).map), ((NI) ((NI)(oldLen + (*c).diff))));
		}
		LA50_: ;
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___mirZmirchangesets_994)(tyObject_PreparedChangeset__by5PLYgQ9bgVJfzK8kYLIJQ* dest) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	eqdestroy___mirZastgen_1688((&(*dest).nodes));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	eqdestroy___mirZmirchangesets_330((&(*dest).rows));
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, moveRight__mirZmirchangesets_854)(tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA* x, NI xLen_0, NI src, NI dest, NI len) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NI i;
		NI colontmp_;
		NI res;
		i = (NI)0;
		colontmp_ = (NI)0;
		colontmp_ = (NI)(((NI) (len)) - ((NI) 1));
		res = colontmp_;
		{
			while (1) {
				tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA* colontmp__2;
				tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA colontmp__3;
				{
					if (!!((((NI) 0) <= res))) goto LA6_;
					goto LA3;
				}
				LA6_: ;
				i = res;
				colontmp__2 = (&x[(NI)(((NI) (dest)) + i)]);
				nimZeroMem((void*)(&colontmp__3), sizeof(tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA));
				colontmp__3 = x[(NI)(((NI) (src)) + i)];
				nimZeroMem((void*)(&x[(NI)(((NI) (src)) + i)]), sizeof(tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA));
				eqsink___mirZmirtrees_920(colontmp__2, colontmp__3);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				res -= ((NI) 1);
			} LA3: ;
		}
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, moveLeft__mirZmirchangesets_892)(tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA* x, NI xLen_0, NI src, NI dest, NI len) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NI i;
		NI colontmp_;
		NI i_2;
		i = (NI)0;
		colontmp_ = (NI)0;
		colontmp_ = ((NI) (len));
		i_2 = ((NI) 0);
		{
			while (1) {
				tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA* colontmp__2;
				tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA colontmp__3;
				{
					if (!!((i_2 < colontmp_))) goto LA6_;
					goto LA3;
				}
				LA6_: ;
				i = i_2;
				colontmp__2 = (&x[(NI)(((NI) (dest)) + i)]);
				nimZeroMem((void*)(&colontmp__3), sizeof(tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA));
				colontmp__3 = x[(NI)(((NI) (src)) + i)];
				nimZeroMem((void*)(&x[(NI)(((NI) (src)) + i)]), sizeof(tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA));
				eqsink___mirZmirtrees_920(colontmp__2, colontmp__3);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				i_2 += ((NI) 1);
			} LA3: ;
		}
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, apply__mirZmirchangesets_830)(tySequence__zZmWEaviOIxzDvlzt0ZnCQ* tree, tyObject_PreparedChangeset__by5PLYgQ9bgVJfzK8kYLIJQ* c) {
NIM_BOOL oldNimErrFin1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NI T4_;
		T4_ = (*c).rows.len;
		if (!(T4_ == ((NI) 0))) goto LA5_;
		eqdestroy___mirZmirchangesets_994(c);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
	LA5_: ;
	{
		tyObject_Row__HhQcROiNYPtBwUbMuAkELQ* row;
		NU32 writePos;
		NI oldLen;
		NI T8_;
		NI writePos_2;
		NI readPos;
		NI origPos;
		NIM_BOOL colontmp__3;
		row = (tyObject_Row__HhQcROiNYPtBwUbMuAkELQ*)0;
		writePos = (NU32)0;
		T8_ = (*tree).len;
		oldLen = T8_;
		writePos_2 = ((NI) ((*c).rows.p->data[((NI) 0)].orig.a));
		readPos = writePos_2;
		origPos = writePos_2;
		{
			NI start;
			if (!(((NI) 0) < (*c).stagingSize)) goto LA11_;
			start = ((NI) ((*c).rows.p->data[((NI) 0)].orig.a));
			setLen__mirZastgen_1707(tree, ((NI) ((NI)(oldLen + (*c).stagingSize))));
			readPos = (NI)(start + (*c).stagingSize);
			moveRight__mirZmirchangesets_854((*tree).p->data, (*tree).len, ((NI) (start)), ((NI) (readPos)), ((NI) ((NI)(oldLen - start))));
			if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		}
		LA11_: ;
		{
			NI i;
			tyObject_Row__HhQcROiNYPtBwUbMuAkELQ* row_2;
			NI i_2;
			NI L;
			NI T14_;
			i = (NI)0;
			row_2 = (tyObject_Row__HhQcROiNYPtBwUbMuAkELQ*)0;
			i_2 = ((NI) 0);
			T14_ = (*c).rows.len;
			L = T14_;
			{
				while (1) {
					NI start_2;
					NI T37_;
					NI T38_;
					NI T39_;
					{
						if (!!((i_2 < L))) goto LA19_;
						goto LA16;
					}
					LA19_: ;
					i = i_2;
					row_2 = (&(*c).rows.p->data[i_2]);
					start_2 = ((NI) ((*row_2).orig.a));
					{
						NI L_2;
						if (!(origPos < start_2)) goto LA23_;
						L_2 = (NI)(start_2 - origPos);
						{
							if (!!((readPos == writePos_2))) goto LA27_;
							moveLeft__mirZmirchangesets_892((*tree).p->data, (*tree).len, ((NI) (readPos)), ((NI) (writePos_2)), ((NI) (L_2)));
							if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
						}
						LA27_: ;
						readPos += L_2;
						writePos_2 += L_2;
						origPos += L_2;
					}
					LA23_: ;
					row = row_2;
					writePos = ((NU32) (writePos_2));
					{
						NU32 p;
						p = (NU32)0;
						{
							NU32 i_3;
							NU32 res;
							i_3 = (NU32)0;
							res = (*row).src.a;
							{
								while (1) {
									tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA* colontmp_;
									tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA colontmp__2;
									{
										if (!!(((NU32)(res) < (NU32)((*row).src.b)))) goto LA35_;
										goto LA32;
									}
									LA35_: ;
									i_3 = res;
									p = i_3;
									colontmp_ = (&(*tree).p->data[(NU32)((NU32)(writePos) + (NU32)((NU32)((NU32)(p) - (NU32)((*row).src.a))))]);
									nimZeroMem((void*)(&colontmp__2), sizeof(tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA));
									colontmp__2 = (*c).nodes.p->data[p];
									nimZeroMem((void*)(&(*c).nodes.p->data[p]), sizeof(tyObject_MirNode__Ck9a27Te6Bd4HkcQYZdaeVA));
									eqsink___mirZmirtrees_920(colontmp_, colontmp__2);
									if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
									res += ((NI) 1);
								} LA32: ;
							}
						}
					}
					T37_ = (NI)0;
					T37_ = len__mirZmirgen_992((*row_2).orig);
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
					readPos += T37_;
					T38_ = (NI)0;
					T38_ = len__mirZmirgen_992((*row_2).orig);
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
					origPos += T38_;
					T39_ = (NI)0;
					T39_ = len__mirZmirgen_992((*row_2).src);
					if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
					writePos_2 += T39_;
					i_2 += ((NI) 1);
				} LA16: ;
			}
		}
		colontmp__3 = (NIM_BOOL)0;
		{
			colontmp__3 = (origPos < oldLen);
			{
				if (!!(colontmp__3)) goto LA43_;
				goto LA40;
			}
			LA43_: ;
			colontmp__3 = !((readPos == writePos_2));
		} LA40: ;
		{
			if (!colontmp__3) goto LA47_;
			moveLeft__mirZmirchangesets_892((*tree).p->data, (*tree).len, ((NI) (readPos)), ((NI) (writePos_2)), ((NI) ((NI)(oldLen - origPos))));
			if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
		}
		LA47_: ;
		{
			if (!!(((*c).diff == (*c).stagingSize))) goto LA51_;
			setLen__mirZastgen_1707(tree, ((NI) ((NI)(oldLen + (*c).diff))));
		}
		LA51_: ;
	}
	{
		LA1_:;
	}
	{
		oldNimErrFin1_ = *nimErr_; *nimErr_ = NIM_FALSE;
		eqdestroy___mirZmirchangesets_994(c);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		*nimErr_ = oldNimErrFin1_;
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(tyObject_HOslice__RlqXQOhSBmcZ0M7gcBURgw, span__mirZmirchangesets_43)(NU32 a, NU32 b) {
	tyObject_HOslice__RlqXQOhSBmcZ0M7gcBURgw result;
	nimZeroMem((void*)(&result), sizeof(tyObject_HOslice__RlqXQOhSBmcZ0M7gcBURgw));
	nimZeroMem((void*)(&result), sizeof(tyObject_HOslice__RlqXQOhSBmcZ0M7gcBURgw));
	result.a = a;
	result.b = b;
	return result;
}
static N_INLINE(tyObject_Row__HhQcROiNYPtBwUbMuAkELQ, row__mirZmirchangesets_36)(NI32 start, NI32 fin, tyObject_HOslice__RlqXQOhSBmcZ0M7gcBURgw src, NI32 source) {
	tyObject_Row__HhQcROiNYPtBwUbMuAkELQ result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyObject_Row__HhQcROiNYPtBwUbMuAkELQ));
	nimZeroMem((void*)(&result), sizeof(tyObject_Row__HhQcROiNYPtBwUbMuAkELQ));
	result.orig = span__mirZmirchangesets_43(((NU32) (start)), ((NU32) (fin)));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	result.src = src;
	result.source = ((NU32) (source));
	}BeforeRet_: ;
	return result;
}
static N_INLINE(tyObject_HOslice__RlqXQOhSBmcZ0M7gcBURgw, empty__mirZmirchangesets_226)(void) {
	tyObject_HOslice__RlqXQOhSBmcZ0M7gcBURgw result;
	nimZeroMem((void*)(&result), sizeof(tyObject_HOslice__RlqXQOhSBmcZ0M7gcBURgw));
	nimZeroMem((void*)(&result), sizeof(tyObject_HOslice__RlqXQOhSBmcZ0M7gcBURgw));
	result.a = 0;
	result.b = 0;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, remove__mirZmirchangesets_220)(tyObject_Changeset__qDD4802cbTm0qC3yMBxCwg* c) {
	NI32 next;
	tyObject_HOslice__RlqXQOhSBmcZ0M7gcBURgw T1_;
	tyObject_Row__HhQcROiNYPtBwUbMuAkELQ T2_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	next = sibling__mirZmirtrees_359((*c).tree, (*c).pos);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	T1_ = empty__mirZmirchangesets_226();
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	T2_ = row__mirZmirchangesets_36((*c).pos, next, T1_, ((NI32) 0));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	add__mirZmirchangesets_138((&(*c).rows), T2_);
	(*c).pos = next;
	}BeforeRet_: ;
}
